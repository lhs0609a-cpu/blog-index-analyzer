"""
ìì—°ìŠ¤ëŸ¬ìš´ ì»¤ë®¤ë‹ˆí‹° ì½˜í…ì¸  ìƒì„±ê¸°
- ì‹¤ì œ ì‚¬ëŒì²˜ëŸ¼ ë¹„ì†ì–´, ì¤„ì„ë§, ì˜ì‹¬, ë¶ˆë§Œ ë“± ë‹¤ì–‘í•œ ê°ì • í‘œí˜„
- ì¼ê´€ëœ ê°€ìƒ ìœ ì € í˜ë¥´ì†Œë‚˜
- ë§¥ë½ì— ë§ëŠ” ëŒ€í™” íë¦„
"""
import random
import json
import hashlib
from datetime import datetime, timedelta
from typing import List, Dict, Optional, Tuple
from dataclasses import dataclass, field
from enum import Enum
import logging

logger = logging.getLogger(__name__)


# ============ ê°ì • & ì„±ê²© ì‹œìŠ¤í…œ ============

class Mood(Enum):
    """ê¸€ ì‘ì„± ì‹œ ê¸°ë¶„/ê°ì •"""
    HAPPY = "happy"           # ê¸°ì¨, ì„±ê³µ
    FRUSTRATED = "frustrated" # ì§œì¦, ë‹µë‹µ
    CURIOUS = "curious"       # ê¶ê¸ˆ, ì§ˆë¬¸
    SKEPTICAL = "skeptical"   # ì˜ì‹¬, íšŒì˜ì 
    EXCITED = "excited"       # í¥ë¶„, ì‹ ë‚¨
    TIRED = "tired"           # ì§€ì¹¨, ìŠ¬ëŸ¼í”„
    HELPFUL = "helpful"       # ë„ì›€ì£¼ê³  ì‹¶ìŒ
    BRAGGING = "bragging"     # ìë‘, ë¿Œë“¯
    COMPLAINING = "complaining"  # ë¶ˆë§Œ, íˆ¬ëœ
    SARCASTIC = "sarcastic"   # ë¹„ê¼¬ëŠ”, ëƒ‰ì†Œì 


class Personality(Enum):
    """ìœ ì € ì„±ê²© ìœ í˜•"""
    FRIENDLY = "friendly"     # ì¹œê·¼, ì´ëª¨í‹°ì½˜ ë§ì´
    BLUNT = "blunt"          # ì§ì„¤ì , ë‹¨ë‹µ
    DETAILED = "detailed"     # ê¼¼ê¼¼, ì¥ë¬¸
    CASUAL = "casual"        # í¸í•œ, ë°˜ë§ ì„ì„
    POLITE = "polite"        # ê³µì†, ì¡´ëŒ“ë§
    SARCASTIC = "sarcastic"  # ë¹„ê¼¬ëŠ”, ëƒ‰ì†Œì 


# ============ ìì—°ìŠ¤ëŸ¬ìš´ í‘œí˜„ ì‚¬ì „ ============

# ì¤„ì„ë§ & ì‹ ì¡°ì–´
SLANG_DICT = {
    "ì •ë§": ["ì§„ì§œ", "ã„¹ã…‡", "ë ˆì•Œ", "ë§ˆì", "ã…‡ã…ˆ"],
    "ëŒ€ë°•": ["ã„·ã…‚", "ëŒ€ë°•ã…‹ã…‹", "í—", "ë¯¸ì³¤ë‹¤", "ì˜¤..."],
    "ê°ì‚¬í•©ë‹ˆë‹¤": ["ê°ì‚¬í•´ìš”", "ã„³ã„³", "ê³ ë§ˆì›Œìš”", "ë•¡í", "ìŒ©ìœ "],
    "ì¶•í•˜í•©ë‹ˆë‹¤": ["ì¶•í•˜í•´ìš”", "ã…Šã…‹ã…Šã…‹", "ì˜¤ ì¶•í•˜!", "ã…Šã…‹"],
    "í˜ë‚´ì„¸ìš”": ["í™”ì´íŒ…", "ã…ã…‡ã…Œ", "í˜ë‚´ìš”", "íŒŒì´íŒ…", "í™§íŒ…"],
    "ëª¨ë¥´ê² ì–´ìš”": ["ëª¨ë¥´ê² ìŒ", "ëª¨ë¦„ã… ", "???", "ë­ì§€", "ëª¨ë¥´ê²Ÿì–´ìš”"],
    "ì¢‹ì•„ìš”": ["ì¢‹ìŒ", "êµ¿", "ã„±ã…‡ã„·", "ì¢‹ë„¤ìš”", "ê´œì°®ë„¤"],
    "ê·¸ëŸ°ë°": ["ê·¼ë°", "ã„±ã„·", "ê·¸ì¹˜ë§Œ", "í—Œë°"],
    "ì–´ë–»ê²Œ": ["ì–´ì¼€", "ì–´ìº", "ì–´ë–¡ê²Œ", "ì–´ë–»ê²Œìš”"],
    "ì™œ": ["ì™œìš”", "ì™œ??", "ì›¨", "ì™œì§€"],
}

# ê°íƒ„ì‚¬ & í•„ëŸ¬
FILLERS = {
    "start": ["ì•„", "ìŒ", "ì–´", "í ", "ì˜¤", "ì•—", "ì—¥", "í—", "ì™€", "ìš°ì™€"],
    "mid": ["ê·¸", "ì´ì œ", "ë­", "ì¢€", "ë§‰", "ì•½ê°„", "ê±", "ê·¸ëƒ¥"],
    "end": ["ã…‹ã…‹", "ã…ã…", "ã… ã… ", "...", ";;;", "ã„·ã„·", "??", "!!", "~"],
}

# ì´ëª¨í‹°ì½˜ (ì„±ê²©ë³„ ë¹ˆë„ ë‹¤ë¦„)
EMOTICONS = {
    "positive": ["ğŸ˜Š", "ğŸ‰", "ğŸ’ª", "âœ¨", "ğŸ”¥", "ğŸ‘", "ğŸ˜„", "ğŸ¥³", "ğŸ’•", "â˜ºï¸"],
    "negative": ["ğŸ˜¢", "ğŸ˜­", "ã… ã… ", "ã…œã…œ", "ğŸ˜", "ğŸ’”", "ğŸ˜¤", "ğŸ˜ "],
    "neutral": ["ğŸ¤”", "ğŸ˜…", "ã…ã…", "ã…‹ã…‹", "ğŸ‘€", "ğŸ™„", "ğŸ˜¶"],
}

# ë¹„ì†ì–´/ê°•í•œ í‘œí˜„ (ê°€ë²¼ìš´ ìˆ˜ì¤€)
MILD_EXPLETIVES = [
    "ã……ã…‚", "ì‹œë°œ", "ã…ˆã„´", "ì¡´ë‚˜", "ã„¹ã…‡ã…‹ã…‹", "ã…ã…Š", "ë¯¸ì¹œ",
    "ê°œ", "ì¡´", "ë ˆì „ë“œ", "ã„¹ã…‡ë£¨ë‹¤ê°€", "í—ã…‹ã…‹ã…‹",
    "ì•„ ì§„ì§œ", "ì•„ã…‹ã…‹", "ì—íœ´", "í•˜...", "ì•„ë†”",
]

# ì˜ì‹¬/íšŒì˜ì  í‘œí˜„
SKEPTICAL_EXPRESSIONS = [
    "ì§„ì§œìš”?", "ì—ì´ ì„¤ë§ˆ", "ê·¸ê²Œ ë˜ë‚˜ìš”?", "ê¸€ì„ìš”...",
    "ë¯¿ê¸° í˜ë“ ë°", "ë»¥ ì•„ë‹˜?", "ê´‘ê³  ì•„ë‹ˆì£ ?", "í™ë³´ê¸€ ê°™ì€ë°",
    "ì§„ì§ ì§€ ëª¨ë¥´ê² ë„¤", "ì˜ì‹¬ë¨ã…‹ã…‹", "ì–´ ê·¸ë˜ìš”?", "í ...",
    "ê·¼ë° ì´ê±° íš¨ê³¼ ìˆìŒ?", "ì €ë„ í•´ë´¤ëŠ”ë° ì•ˆë˜ë˜ë°",
    "ì‚¬ëŒë§ˆë‹¤ ë‹¤ë¥¸ ê±° ì•„ë‹˜?", "ìš´ ì¢‹ì•˜ë˜ ê±° ì•„ë‹ê¹Œ",
]

# ë¶ˆë§Œ/íˆ¬ëœ í‘œí˜„
COMPLAINT_EXPRESSIONS = [
    "ì•„ ì§œì¦ë‚˜", "ì™œ ì•ˆë˜ì§€", "ã… ã…  í˜ë“¤ë‹¤", "í•˜...",
    "ì´ê²Œ ë­ì•¼", "ì–´ì´ì—†ë„¤", "ë‹µë‹µí•´", "ë¯¸ì¹˜ê² ë‹¤",
    "í¬ê¸°í•˜ê³  ì‹¶ìŒ", "ì˜ìš• ì—†ì–´", "ê·€ì°®ì•„", "í˜ë“¦",
    "ì´ê±° ì–¸ì œê¹Œì§€ í•´ì•¼í•¨?", "ì§„ì§œ ì•ˆë¨ã… ã… ", "ë‚˜ë§Œ ì•ˆë˜ë‚˜",
]


# ============ ê°€ìƒ ìœ ì € ì‹œìŠ¤í…œ ============

@dataclass
class VirtualUser:
    """ì¼ê´€ëœ ì„±ê²©ì„ ê°€ì§„ ê°€ìƒ ìœ ì €"""
    id: int
    name: str
    personality: Personality
    blog_months: int  # ë¸”ë¡œê·¸ ê²½ë ¥ (ê°œì›”)
    skill_level: str  # Bronze, Silver, Gold, Platinum
    main_topic: str  # ì£¼ ê´€ì‹¬ ì£¼ì œ
    writing_style: Dict = field(default_factory=dict)

    def __post_init__(self):
        # ì„±ê²©ì— ë”°ë¥¸ ê¸€ì“°ê¸° ìŠ¤íƒ€ì¼ ì„¤ì •
        self.writing_style = {
            "uses_slang": self.personality in [Personality.CASUAL, Personality.BLUNT],
            "uses_emoticons": self.personality in [Personality.FRIENDLY, Personality.CASUAL],
            "emoticon_frequency": 0.7 if self.personality == Personality.FRIENDLY else 0.3,
            "uses_honorifics": self.personality in [Personality.POLITE, Personality.DETAILED],
            "avg_length": "long" if self.personality == Personality.DETAILED else "short" if self.personality == Personality.BLUNT else "medium",
            "uses_expletives": self.personality in [Personality.CASUAL, Personality.BLUNT, Personality.SARCASTIC],
            "expletive_frequency": 0.1 if self.personality == Personality.CASUAL else 0.05,
        }


# ê°€ìƒ ìœ ì € ì´ë¦„ í’€ (ë” ìì—°ìŠ¤ëŸ½ê²Œ)
USER_NAME_COMPONENTS = {
    "prefixes": [
        "", "ì‘ì€", "í°", "ì˜¤ëŠ˜ì˜", "ë§¤ì¼", "ì†Œì†Œí•œ", "í–‰ë³µí•œ", "ê¾¸ì¤€í•œ",
        "ì—´ì‹¬íˆ", "ì´ˆë³´", "í”„ë¡œ", "ë„ì „", "ì„±ì¥", "ì‹œì‘", "ë…¸ë ¥",
    ],
    "cores": [
        "ë¯¼ì§€", "ìˆ˜í˜„", "ì§€ìœ ", "í•˜ì€", "ì„œì—°", "ì˜ˆë¦°", "ì†Œë¯¼", "ì±„ì›",
        "ì¤€í˜¸", "ë¯¼ì„", "ì§€í›ˆ", "í˜„ìš°", "ì„±ë¯¼", "ì¬í˜„", "ë„ìœ¤", "ì‹œìš°",
        "ë¸”ë¡œê±°", "ê¸°ë¡", "ì¼ìƒ", "í•˜ë£¨", "ìƒí™œ", "ì´ì•¼ê¸°", "ìŠ¤í† ë¦¬",
        "ë§˜", "ëŒ€ë””", "ì›Œí‚¹ë§˜", "ì§ì¥ì¸", "í”„ë¦¬ëœì„œ", "ëŒ€í•™ìƒ", "ì·¨ì¤€ìƒ",
    ],
    "suffixes": [
        "", "log", "diary", "story", "_", ".", "ë‹˜", "ì”¨",
        "92", "95", "98", "00", "01", "88", "90",
        "_blog", "_daily", "_life", "ì˜í•˜ë£¨", "ì˜ì¼ìƒ",
    ],
}

# ì£¼ì œ í’€
TOPICS = [
    "ë§›ì§‘", "ì¹´í˜", "ì—¬í–‰", "ìœ¡ì•„", "ì¸í…Œë¦¬ì–´", "íŒ¨ì…˜", "ë·°í‹°", "IT",
    "ì¬í…Œí¬", "ìê¸°ê³„ë°œ", "ìš´ë™", "ìš”ë¦¬", "ë°˜ë ¤ë™ë¬¼", "ë…ì„œ", "ì˜í™”",
    "ì¼ìƒ", "ë¦¬ë·°", "ì²´í—˜ë‹¨", "ì• ë“œì„¼ìŠ¤", "Nì¡",
    "ìº í•‘", "ë“±ì‚°", "ìˆ˜ì˜", "ë‹¤ì´ì–´íŠ¸", "í™ˆì¹´í˜", "ì›ì˜ˆ", "ìˆ˜ê³µì˜ˆ",
    "ì‚¬ì§„", "ë¸Œì´ë¡œê·¸", "ê³µë¶€ë²•", "ì–´í•™", "ìê²©ì¦", "ë¶€ë™ì‚°",
]


def generate_virtual_user(user_id: int = None) -> VirtualUser:
    """ê°€ìƒ ìœ ì € ìƒì„± (ID ê¸°ë°˜ìœ¼ë¡œ ì¼ê´€ëœ ì„±ê²© ìœ ì§€)"""
    if user_id is None:
        user_id = random.randint(10000, 99999)

    # IDë¥¼ ì‹œë“œë¡œ ì‚¬ìš©í•˜ì—¬ ì¼ê´€ëœ ëœë¤ê°’ ìƒì„±
    seed = int(hashlib.md5(str(user_id).encode()).hexdigest()[:8], 16)
    rng = random.Random(seed)

    # ì´ë¦„ ìƒì„±
    prefix = rng.choice(USER_NAME_COMPONENTS["prefixes"])
    core = rng.choice(USER_NAME_COMPONENTS["cores"])
    suffix = rng.choice(USER_NAME_COMPONENTS["suffixes"])
    name = f"{prefix}{core}{suffix}".strip()

    # ì„±ê²© (ê°€ì¤‘ì¹˜ ì ìš©)
    personalities = list(Personality)
    weights = [25, 15, 20, 25, 10, 5]  # friendly, blunt, detailed, casual, polite, sarcastic
    personality = rng.choices(personalities, weights=weights)[0]

    # ë¸”ë¡œê·¸ ê²½ë ¥ (ì§€ìˆ˜ ë¶„í¬ - ì´ˆë³´ê°€ ë§ìŒ)
    blog_months = min(int(rng.expovariate(0.1)), 36)

    # ìŠ¤í‚¬ ë ˆë²¨ (ê²½ë ¥ì— ë¹„ë¡€)
    if blog_months < 2:
        skill_level = "Bronze"
    elif blog_months < 6:
        skill_level = rng.choice(["Bronze", "Silver"])
    elif blog_months < 12:
        skill_level = rng.choice(["Silver", "Gold"])
    else:
        skill_level = rng.choice(["Gold", "Platinum"])

    return VirtualUser(
        id=user_id,
        name=name,
        personality=personality,
        blog_months=blog_months,
        skill_level=skill_level,
        main_topic=rng.choice(TOPICS),
    )


# ============ ìì—°ìŠ¤ëŸ¬ìš´ í…ìŠ¤íŠ¸ ë³€í™˜ê¸° ============

class NaturalTextTransformer:
    """í…ìŠ¤íŠ¸ë¥¼ ë” ìì—°ìŠ¤ëŸ½ê²Œ ë³€í™˜"""

    @staticmethod
    def add_typos(text: str, probability: float = 0.02) -> str:
        """ìì—°ìŠ¤ëŸ¬ìš´ ì˜¤íƒ€ ì¶”ê°€"""
        typo_map = {
            "ã…": "ã…“", "ã…“": "ã…", "ã…—": "ã…œ", "ã…œ": "ã…—",
            "ã„±": "ã…‹", "ã„·": "ã…Œ", "ã…‚": "ã…",
        }
        result = list(text)
        for i, char in enumerate(result):
            if random.random() < probability and char in typo_map:
                result[i] = typo_map[char]
        return "".join(result)

    @staticmethod
    def apply_slang(text: str, intensity: float = 0.3) -> str:
        """ì¤„ì„ë§/ì‹ ì¡°ì–´ ì ìš©"""
        result = text
        for formal, slangs in SLANG_DICT.items():
            if formal in result and random.random() < intensity:
                result = result.replace(formal, random.choice(slangs), 1)
        return result

    @staticmethod
    def add_fillers(text: str, user: VirtualUser) -> str:
        """ê°íƒ„ì‚¬/í•„ëŸ¬ ì¶”ê°€"""
        if user.personality not in [Personality.CASUAL, Personality.FRIENDLY]:
            return text

        sentences = text.split(".")
        result = []

        for i, sentence in enumerate(sentences):
            if not sentence.strip():
                continue

            # ì‹œì‘ì— í•„ëŸ¬ ì¶”ê°€ (20% í™•ë¥ )
            if i == 0 and random.random() < 0.2:
                filler = random.choice(FILLERS["start"])
                sentence = f"{filler} {sentence.strip()}"

            # ì¤‘ê°„ì— í•„ëŸ¬ ì¶”ê°€ (10% í™•ë¥ )
            if random.random() < 0.1:
                words = sentence.split()
                if len(words) > 3:
                    insert_pos = random.randint(1, len(words) - 1)
                    filler = random.choice(FILLERS["mid"])
                    words.insert(insert_pos, filler)
                    sentence = " ".join(words)

            result.append(sentence)

        return ".".join(result)

    @staticmethod
    def add_emoticons(text: str, user: VirtualUser, mood: Mood) -> str:
        """ì´ëª¨í‹°ì½˜ ì¶”ê°€"""
        if not user.writing_style.get("uses_emoticons"):
            return text

        freq = user.writing_style.get("emoticon_frequency", 0.3)

        # ê¸°ë¶„ì— ë”°ë¥¸ ì´ëª¨í‹°ì½˜ ì„ íƒ
        if mood in [Mood.HAPPY, Mood.EXCITED, Mood.BRAGGING]:
            emoticon_pool = EMOTICONS["positive"]
        elif mood in [Mood.FRUSTRATED, Mood.TIRED, Mood.COMPLAINING]:
            emoticon_pool = EMOTICONS["negative"]
        else:
            emoticon_pool = EMOTICONS["neutral"]

        # ë¬¸ì¥ ëì— ì´ëª¨í‹°ì½˜ ì¶”ê°€
        sentences = text.split("\n")
        result = []

        for sentence in sentences:
            if sentence.strip() and random.random() < freq:
                emoticon = random.choice(emoticon_pool)
                sentence = f"{sentence.rstrip()} {emoticon}"
            result.append(sentence)

        return "\n".join(result)

    @staticmethod
    def add_line_breaks(text: str, user: VirtualUser) -> str:
        """ìì—°ìŠ¤ëŸ¬ìš´ ì¤„ë°”ê¿ˆ"""
        if user.personality == Personality.BLUNT:
            # ì§§ê²Œ ëŠì–´ì„œ
            return text.replace(". ", ".\n")
        elif user.personality == Personality.DETAILED:
            # ë¬¸ë‹¨ ë‹¨ìœ„ë¡œ
            sentences = text.split(". ")
            result = []
            for i, s in enumerate(sentences):
                result.append(s)
                if (i + 1) % 3 == 0:
                    result.append("\n")
            return ". ".join(result)
        return text


# ============ ì½˜í…ì¸  ìƒì„±ê¸° (ë¬´ë“œë³„) ============

# ê²Œì‹œê¸€ í…œí”Œë¦¿ (ë¬´ë“œë³„ë¡œ ì„¸ë¶„í™”)
POST_TEMPLATES_BY_MOOD = {
    Mood.HAPPY: {
        "success": [
            {
                "title": "{keyword} ë“œë””ì–´ {rank} ì°ì—ˆë‹¤!!",
                "content": """ã…‹ã…‹ã…‹ã…‹ ë“œë””ì–´ ëë‹¤

{keyword}ë¡œ {rank} ì§„ì…í•¨

ë¸”ë¡œê·¸ {months}ê°œì›”ë§Œì¸ë° {struggle} ë“œë””ì–´ ë˜ë„¤

{method}

ã„¹ã…‡ ê¾¸ì¤€íˆ í•˜ë©´ ë˜ê¸´ í•˜ëŠ”ë“¯""",
            },
            {
                "title": "ì˜¤ëŠ˜ í™•ì¸í–ˆëŠ”ë° {keyword} ìƒìœ„ë…¸ì¶œ ë¨",
                "content": """ì•„ê¹Œ ê²€ìƒ‰í•´ë´¤ëŠ”ë° {rank} ì°í˜€ìˆìŒ

{struggle} ê·¼ë° ëë„¤ ã…‹ã…‹

{method}

ì´ì œ ë‹¤ìŒ í‚¤ì›Œë“œ ë„ì „í•´ë´ì•¼ì§€""",
            },
            {
                "title": "ë°©ê¸ˆ ìƒìœ„ë…¸ì¶œ í™•ì¸í–ˆëŠ”ë° ì†ë–¨ë¦¼",
                "content": """{keyword} ì–´ì œ ì˜¬ë¦° ê¸€ì¸ë°
ì•„ì¹¨ì— ê²€ìƒ‰í•´ë´¤ë”ë‹ˆ {rank} ì°í˜€ìˆìŒ

{months}ê°œì›” í•˜ë©´ì„œ ì²˜ìŒì´ë¼ ã„¹ã…‡ ë–¨ë¦¼

{method}

ê¸°ë¶„ ì§„ì§œ ì¢‹ë‹¤""",
            },
            {
                "title": "{keyword} ì„±ê³µ í›„ê¸° ë‚¨ê¹ë‹ˆë‹¤",
                "content": """ì†”ì§íˆ ì•ˆë ì¤„ ì•Œì•˜ëŠ”ë° ì§„ì§œ ëì–´ìš”

{months}ê°œì›” ê±¸ë ¸ëŠ”ë° {method}

ë¹„ê²°ì´ë¼ë©´ {method_name}

ì´ê²ƒë§Œ í•˜ë©´ ì§„ì§œ ì°¨ì´ë‚¨""",
            },
        ],
        "tip": [
            {
                "title": "{topic} íš¨ê³¼ë³¸ ë°©ë²• ê³µìœ í• ê²Œìš”",
                "content": """ë¸”ë¡œê·¸ {months}ê°œì›”ì°¨ì¸ë° ì œê°€ ì‹¤ì œë¡œ í•´ë³¸ ë°©ë²•ì´ì—ìš”

{tip_content}

ì´ê±° {days} ì •ë„ í•´ë³´ë‹ˆê¹Œ í™•ì‹¤íˆ ë‹¬ë¼ì¡Œì–´ìš”

ì§ˆë¬¸ ìˆìœ¼ì‹œë©´ ëŒ“ê¸€ë¡œ~""",
            },
            {
                "title": "ì´ë ‡ê²Œ í•˜ë‹ˆê¹Œ {topic} ë°”ë¡œ íš¨ê³¼ë‚¨",
                "content": """ìš”ì¦˜ ì œê°€ ì“°ëŠ” ë°©ë²•ì¸ë°

{tip_content}

ì²˜ìŒì—ëŠ” ë°˜ì‹ ë°˜ì˜í–ˆëŠ”ë° {days}ë§Œì— ê²°ê³¼ê°€ ë³´ì´ë”ë¼

ì•„ì§ ì•ˆí•´ë³´ì‹  ë¶„ë“¤ ê¼­ í•´ë³´ì„¸ìš”""",
            },
            {
                "title": "ë¸”ë¡œê·¸ {months}ê°œì›”ì°¨ê°€ ê¹¨ë‹¬ì€ {topic}",
                "content": """ì´ˆë³´ë•Œ ì´ê±° ì•Œì•˜ìœ¼ë©´ ì‹œê°„ ì•„ê¼ˆì„í…ë° ì‹¶ì€ ê²ƒë“¤

{tip_content}

ì €ë„ ì²˜ìŒì—ëŠ” ëª°ëëŠ”ë° ì´ê±° í•˜ê³  ë‚˜ì„œ í™• ë‹¬ë¼ì¡ŒìŒ""",
            },
            {
                "title": "{topic} ê¿€íŒ í•˜ë‚˜ë§Œ ê³µìœ í•©ë‹ˆë‹¤",
                "content": """ë§ì€ ë¶„ë“¤ì´ ë†“ì¹˜ê³  ìˆëŠ”ê±´ë°

{tip_content}

ì´ê±° í•˜ë‚˜ë§Œ ë°”ê¿”ë„ ê²°ê³¼ê°€ í™• ë‹¬ë¼ì ¸ìš”""",
            },
        ],
    },
    Mood.FRUSTRATED: {
        "question": [
            {
                "title": "ì•„ ì™œ ìƒìœ„ë…¸ì¶œ ì•ˆë˜ëƒ",
                "content": """ì§„ì§œ {days}ì§¸ ë§¤ì¼ ì˜¬ë¦¬ëŠ”ë° ì™œ ì•ˆë¨?

{stats}

ë­ê°€ ë¬¸ì œì¸ì§€ ëª¨ë¥´ê² ìŒ
ê³ ìˆ˜ë¶„ë“¤ ì¢€ ì•Œë ¤ì£¼ì„¸ìš” ã… ã… """,
            },
            {
                "title": "{keyword} ì§„ì§œ ì–´ë µë„¤...",
                "content": """ì´ í‚¤ì›Œë“œ ê²½ìŸ ë„ˆë¬´ ì‹¬í•œê±° ì•„ë‹˜?

{attempt_content}

ë‚˜ë§Œ ì•ˆë˜ëŠ”ê±´ê°€ ì•„ë‹˜ ì›ë˜ ì´ëŸ°ê±´ê°€""",
            },
            {
                "title": "ë˜‘ê°™ì´ í–ˆëŠ”ë° ì™œ ë‚˜ë§Œ ì•ˆë¼?",
                "content": """ì§„ì§œ ì´í•´ê°€ ì•ˆë¨

ìƒìœ„ ë¸”ë¡œê·¸ ë”°ë¼í–ˆê±°ë“ ?
ê¸€ììˆ˜ë„ ë§ì¶”ê³  ì‚¬ì§„ ìˆ˜ë„ ë§ì¶”ê³ 

ê·¼ë° ë‚˜ëŠ” 5í˜ì´ì§€ ã…‹ã…‹
{months}ê°œì›”ì§¸ ì´ëŸ¬ê³  ìˆìŒ

ëŒ€ì²´ ë­ê°€ ë‹¤ë¥¸ê±´ì§€ ì•„ì‹œëŠ”ë¶„?""",
            },
            {
                "title": "ê°‘ìê¸° ìˆœìœ„ ë¹ ì¡ŒëŠ”ë° ì´ìœ ê°€ ë­˜ê¹Œ",
                "content": """{keyword} ì›ë˜ {rank}ì˜€ëŠ”ë°

ì˜¤ëŠ˜ í™•ì¸í•˜ë‹ˆê¹Œ ì•„ì˜ˆ ì•ˆë³´ì„

ë°”ê¾¼ê±° í•˜ë‚˜ë„ ì—†ëŠ”ë° ì™œ ì´ëŸ¬ì§€?
{complaint}""",
            },
            {
                "title": "{keyword} ë•Œë¬¸ì— ë©˜íƒˆ ë‚˜ê°",
                "content": """{attempt_content}

ì´ê±° ì§„ì§œ ë‚´ ë¸”ë¡œê·¸ ë¬¸ì œì¸ê±´ê°€
ì•„ë‹˜ í‚¤ì›Œë“œ ìì²´ê°€ ì–´ë ¤ìš´ê±´ê°€

ì†”ì§íˆ í¬ê¸°í•˜ê³  ì‹¶ìŒ""",
            },
        ],
        "free": [
            {
                "title": "ë¸”ë¡œê·¸ í•˜ê¸° ì‹«ë‹¤",
                "content": """ìš”ì¦˜ ì˜ìš•ì´ ì•ˆë‚¨

{months}ê°œì›” í–ˆëŠ”ë° ì„±ê³¼ê°€ ì—†ìœ¼ë‹ˆê¹Œ...

{complaint}

ê·¸ë˜ë„ í•´ì•¼ë˜ë‚˜ í•˜""",
            },
            {
                "title": "ì˜¤ëŠ˜ ì¡°íšŒìˆ˜ ë³´ê³  í˜„íƒ€ì˜´",
                "content": """3ì‹œê°„ ê±¸ë ¤ì„œ ì“´ ê¸€ ì¡°íšŒìˆ˜ 5

{complaint}

ì§„ì§œ ëˆ„êµ¬ë¥¼ ìœ„í•´ ì“°ëŠ”ê±´ì§€ ëª¨ë¥´ê² ìŒ
ê·¸ëƒ¥ ë„ì ì—¬ë´„""",
            },
            {
                "title": "ë¸”ë¡œê·¸ í˜„ì‹¤ ã…‹ã…‹ã…‹",
                "content": """ê¸°ëŒ€: ìƒìœ„ë…¸ì¶œ ë‹¬ì„± í›„ ë°©ë¬¸ì í­ì¦
í˜„ì‹¤: {complaint}

{months}ê°œì›”ì°¨ì˜ í˜„ì‹¤ì´ ì´ë ‡ìŠµë‹ˆë‹¤
ê·¸ë˜ë„ í•˜ê¸´ í•´ì•¼ë˜ë‹ˆê¹Œ""",
            },
        ],
    },
    Mood.SKEPTICAL: {
        "question": [
            {
                "title": "ì´ê±° ì§„ì§œ íš¨ê³¼ ìˆëŠ”ê±° ë§ìŒ?",
                "content": """ì–´ë””ì„œ {method_name} í•˜ë©´ ëœë‹¤ê³  í•˜ë˜ë°

ê·¼ë° {doubt}

í•´ë³´ì‹  ë¶„ ìˆìŒ? ì†”ì§í•œ í›„ê¸° ì¢€""",
            },
            {
                "title": "ã„¹ã…‡ ê¶ê¸ˆí•œê±´ë° {topic} ì˜ë¯¸ìˆìŒ?",
                "content": """{doubt}

ì €ë§Œ ì´ë ‡ê²Œ ìƒê°í•˜ë‚˜?
ì‹¤ì œë¡œ íš¨ê³¼ ë³¸ ë¶„ ìˆìœ¼ë©´ ì•Œë ¤ì£¼ì„¸ìš”

ì¦ê±° ì—†ìœ¼ë©´ ì•ˆë¯¿ì„ê±°ì„""",
            },
            {
                "title": "ìƒìœ„ë…¸ì¶œ ì„±ê³µí–ˆë‹¤ëŠ” ë¶„ë“¤ ì§„ì§œì„?",
                "content": """ì»¤ë®¤ë‹ˆí‹° ë³´ë©´ ë§¤ì¼ ì„±ê³µ í›„ê¸° ì˜¬ë¼ì˜¤ëŠ”ë°

{skeptical_points}

ì˜ì‹¬ë³‘ì¸ê±´ì§€ í•©ë¦¬ì  ì˜ì‹¬ì¸ê±´ì§€""",
            },
        ],
        "free": [
            {
                "title": "ì†”ì§íˆ ì´í•´ ì•ˆë˜ëŠ” ê²ƒë“¤",
                "content": """ë¸”ë¡œê·¸ ì»¤ë®¤ë‹ˆí‹° ë³´ë‹¤ë³´ë©´

{skeptical_points}

ë‚˜ë§Œ ê·¸ëŸ°ê°€?""",
            },
            {
                "title": "ë¸”ë¡œê·¸ ê°•ì˜ ë“¤ìœ¼ë©´ ì§„ì§œ ë¨?",
                "content": """ì£¼ë³€ì—ì„œ ë¸”ë¡œê·¸ ê°•ì˜ ë“£ê³  ì„±ê³µí–ˆë‹¤ëŠ”ë°

{doubt}

ìˆ˜ì‹­ë§Œì› ë‚´ê³  ë“£ëŠ” ê°•ì˜ê°€ ë¬´ë£Œ ì •ë³´ë‘ ë­ê°€ ë‹¤ë¦„?
ë“¤ì–´ë³´ì‹  ë¶„ ì†”ì§í›„ê¸° ë¶€íƒ""",
            },
            {
                "title": "ê´‘ê³ ê¸€ì¸ì§€ ì§„ì§œ í›„ê¸°ì¸ì§€ êµ¬ë¶„ì´ ì•ˆë¨",
                "content": """ìš”ì¦˜ í›„ê¸° ë³´ë©´

ë‹¤ ì¢‹ë‹¤ê³ ë§Œ í•˜ëŠ”ë° {doubt}

ì†”ì§í•œ ë‹¨ì ë„ ì–˜ê¸°í•´ì£¼ëŠ” ì‚¬ëŒì´ ë³„ë¡œ ì—†ìŒ""",
            },
        ],
    },
    Mood.CURIOUS: {
        "question": [
            {
                "title": "{keyword} ì§€ê¸ˆ ë„ì „í•˜ë©´ ê°€ëŠ¥í• ê¹Œ?",
                "content": """í‚¤ì›Œë“œ ë¶„ì„í•´ë´¤ëŠ”ë°

{stats}

ë‚´ ì§€ìˆ˜ë¡œ ê°€ëŠ¥í• ê¹Œìš”?
ë¹„ìŠ·í•œ ìˆ˜ì¤€ì´ì…¨ë˜ ë¶„ë“¤ ì–´ë– ì…¨ì–´ìš”?""",
            },
            {
                "title": "í•˜ë£¨ì— í¬ìŠ¤íŒ… ëª‡ ê°œê°€ ì ë‹¹í•¨?",
                "content": """ìš”ì¦˜ {frequency}ê°œì”© ì˜¬ë¦¬ê³  ìˆëŠ”ë°

ë„ˆë¬´ ë§ì´ ì˜¬ë¦¬ë©´ ì €í’ˆì§ˆ ê±¸ë¦°ë‹¤ëŠ” ë§ë„ ìˆê³ 
ì ê²Œ ì˜¬ë¦¬ë©´ ì§€ìˆ˜ ì•ˆì˜¤ë¥¸ë‹¤ëŠ” ë§ë„ ìˆê³ 

ë‹¤ë“¤ ì–´ë–»ê²Œ í•˜ì„¸ìš”?""",
            },
            {
                "title": "ë¸”ë¡œê·¸ ì‹œì‘ {months}ê°œì›”ì°¨ì¸ë° ì´ ì •ë„ë©´ ê´œì°®ì€ê±´ê°€?",
                "content": """í˜„ì¬ {stats}

ë‹¤ë¥¸ ë¶„ë“¤ì€ ì´ë•Œì¯¤ ì–´ëŠ ì •ë„ì˜€ì–´ìš”?
ë¹„êµí•  ê¸°ì¤€ì´ ì—†ì–´ì„œ

ì˜ í•˜ê³  ìˆëŠ”ê±´ì§€ ëª¨ë¥´ê² ìŒ""",
            },
            {
                "title": "{topic} ì–´ë–»ê²Œ ë°°ì› ì–´ìš”?",
                "content": """ë¸”ë¡œê·¸ ì‹œì‘í•œì§€ {months}ê°œì›”ì¸ë°

{topic}ì„ ì˜ ëª¨ë¥´ê² ì–´ìš”
ìœ íŠœë¸Œ ë³´ë©´ ë‹¤ ë§ì´ ë‹¤ë¥´ê³ 

ì‹¤ì œë¡œ í•˜ì‹œëŠ” ë¶„ë“¤ì€ ì–´ë””ì„œ ë°°ìš°ì…¨ì–´ìš”?""",
            },
            {
                "title": "{keyword} ê²½ìŸë„ ì–´ëŠì •ë„ì˜ˆìš”?",
                "content": """ì´ í‚¤ì›Œë“œë¡œ ë„ì „í•´ë³¼ê¹Œ í•˜ëŠ”ë°

í˜„ì¬ ë‚´ ìƒíƒœëŠ” {stats}

ì´ í‚¤ì›Œë“œê°€ ë‚˜í•œí…Œ ë§ëŠ” ë‚œì´ë„ì¸ì§€ ê°ì´ ì•ˆì™€ìš”
ë¹„ìŠ·í•œ í‚¤ì›Œë“œ í•´ë³´ì‹  ë¶„?""",
            },
            {
                "title": "ì²´í—˜ë‹¨ vs ìì²´ í¬ìŠ¤íŒ… ë­ê°€ ë‚˜ìŒ?",
                "content": """ìš”ì¦˜ ê³ ë¯¼ë˜ëŠ”ê²Œ

ì²´í—˜ë‹¨ ìœ„ì£¼ë¡œ ê°€ë©´ ì½˜í…ì¸ ëŠ” í’ë¶€í•œë° ììœ ë„ê°€ ì—†ê³ 
ë‚´ê°€ ì“°ê³ ì‹¶ì€ê±° ì“°ë©´ ê¸€ê°ì´ í•œì •ì ì´ê³ 

{months}ê°œì›”ì°¨ ê¸°ì¤€ìœ¼ë¡œ ì–´ë””ì— ì§‘ì¤‘í•˜ëŠ”ê²Œ ë‚˜ì„ê¹Œìš”""",
            },
        ],
    },
    Mood.HELPFUL: {
        "tip": [
            {
                "title": "{topic} ì •ë¦¬í•´ë´¤ì–´ìš” (ì´ˆë³´ë¶„ë“¤ ì°¸ê³ )",
                "content": """ì €ë„ ì´ˆë³´ë•Œ ì´ê±° ëª¨ë¥´ê² ì—ˆëŠ”ë° ì •ë¦¬í•´ë´„

{tip_content}

ë„ì›€ ëìœ¼ë©´ ì¢‹ê² ì–´ìš”""",
            },
            {
                "title": "ë¸”ë­í¬ ì´ë ‡ê²Œ í™œìš©í•˜ë©´ ì§„ì§œ í¸í•¨",
                "content": """ë¸”ë­í¬ ì“°ì‹œëŠ” ë¶„ë“¤ ì°¸ê³ í•˜ì„¸ìš”

{tip_content}

ì €ëŠ” ì´ë ‡ê²Œ ì“°ê³  ìˆëŠ”ë° ê´œì°®ë”ë¼êµ¬ìš”""",
            },
            {
                "title": "{months}ê°œì›” í•´ë³´ê³  ê¹¨ë‹¬ì€ ê²ƒë“¤ ì •ë¦¬",
                "content": """ë¸”ë¡œê·¸ {months}ê°œì›” í•˜ë©´ì„œ ì‚½ì§ˆë„ ë§ì´ í–ˆëŠ”ë°
ê·¸ëŸ¬ë©´ì„œ ê¹¨ë‹¬ì€ ê²ƒë“¤ ê³µìœ í• ê²Œìš”

{tip_content}

ì´ˆë³´ë¶„ë“¤í•œí…Œ ë„ì›€ì´ ë˜ë©´ ì¢‹ê² ì–´ìš”""",
            },
            {
                "title": "ì´ˆë³´ ë•Œ ì•Œì•˜ìœ¼ë©´ ì¢‹ì•˜ì„ {topic}",
                "content": """ì € ë¸”ë¡œê·¸ {months}ê°œì›”ì°¨ì¸ë°
ì²˜ìŒì— ì´ê±° ëª°ë¼ì„œ ì‹œê°„ ë§ì´ ë‚­ë¹„í–ˆì–´ìš”

{tip_content}

ì´ê²ƒë§Œ ì•Œì•„ë„ ì‹œí–‰ì°©ì˜¤ ì¤„ì¼ ìˆ˜ ìˆì–´ìš”""",
            },
            {
                "title": "{topic} ì‹¤ì „ì—ì„œ ì“°ëŠ” ë°©ë²• ì•Œë ¤ë“œë¦¼",
                "content": """ì´ë¡ ì€ ë§ì€ë° ì‹¤ì „ ë°©ë²•ì€ ì˜ ì•ˆì•Œë ¤ì£¼ë”ë¼

ì œê°€ ì‹¤ì œë¡œ í•˜ëŠ” ë°©ë²• ê³µìœ í• ê²Œìš”

{tip_content}

ë‹¤ë“¤ í•´ë³´ì‹œê³  ê²°ê³¼ ê³µìœ í•´ì£¼ì„¸ìš”""",
            },
        ],
    },
    Mood.BRAGGING: {
        "success": [
            {
                "title": "ã…‹ã…‹ã…‹ ë“œë””ì–´ {achievement}",
                "content": """ë“œë””ì–´ {achievement} í•¨

{details}

ë¿Œë“¯í•˜ë‹¤ ã…ã…

ë‹¤ìŒ ëª©í‘œëŠ” {next_goal}""",
            },
            {
                "title": "{achievement} ì¸ì¦í•©ë‹ˆë‹¤",
                "content": """{months}ê°œì›” ê±¸ë ¸ì§€ë§Œ ë“œë””ì–´

{achievement} ë‹¬ì„±!!

{details}

ë…¸ë ¥ì€ ë°°ì‹ í•˜ì§€ ì•Šë„¤ìš”""",
            },
            {
                "title": "ëª©í‘œ ë‹¬ì„± ê¸°ë… ê¸€",
                "content": """ì˜¤ëŠ˜ {achievement} ë‹¬ì„±í–ˆìŠµë‹ˆë‹¤

{details}

ì²˜ìŒ ë¸”ë¡œê·¸ ì‹œì‘í• ë•Œ {months}ê°œì›” ì•ˆì— í•˜ê² ë‹¤ê³  í–ˆëŠ”ë°
ì§„ì§œ ëë„¤

ë‹¤ìŒì€ {next_goal} ê°€ë³´ì""",
            },
            {
                "title": "ìë‘ ì¢€ í• ê²Œìš” ã…ã…",
                "content": """ã…‹ã…‹ ìë‘í•˜ë ¤ê³  ê¸€ ì”€

{achievement} í•´ëƒˆìŠµë‹ˆë‹¤

{details}

ì´ ê¸°ë¶„ ì•„ì‹œëŠ”ë¶„ ê³µê°í•´ì£¼ì„¸ìš”""",
            },
        ],
    },
    Mood.COMPLAINING: {
        "free": [
            {
                "title": "ë„¤ì´ë²„ ì•Œê³ ë¦¬ì¦˜ ì§„ì§œ ì´í•´ ì•ˆë¨",
                "content": """{complaint}

ì§„ì§œ ê¸°ì¤€ì´ ë­”ì§€ ëª¨ë¥´ê² ìŒ

ê°™ì€ ì¡°ê±´ì¸ë° ì™œ ì–´ë–¤ ê¸€ì€ ë˜ê³  ì–´ë–¤ ê¸€ì€ ì•ˆë˜ëƒ""",
            },
            {
                "title": "ìš”ì¦˜ ìƒìœ„ë…¸ì¶œ ë„ˆë¬´ ì–´ë ¤ì›Œì§„ë“¯",
                "content": """ì˜ˆì „ì—” ì¢€ ì‰¬ì› ë˜ê²ƒ ê°™ì€ë°

ìš”ì¦˜ì€ {complaint}

ë‹¤ë“¤ ê·¸ëŸ¼? ë‚˜ë§Œ ê·¸ëŸ°ê°€""",
            },
            {
                "title": "ë¸”ë¡œê·¸ í•˜ë©´ì„œ ì œì¼ ì§œì¦ë‚˜ëŠ” ê²ƒ",
                "content": """ì†”ì§íˆ {complaint}

ì´ê±° ë§ê³ ë„ ì§œì¦ë‚˜ëŠ”ê²Œ
ì‹œê°„ íˆ¬ì ëŒ€ë¹„ ì„±ê³¼ê°€ ë„ˆë¬´ ì•ˆë³´ì„

ë‹¤ë“¤ ì–´ë–»ê²Œ ë²„íŒ€?""",
            },
            {
                "title": "ì•„ë‹ˆ ì´ê²Œ ë§ì´ ë˜ëƒ",
                "content": """ëŒ€ì¶© ì“´ ê¸€ì´ ìƒìœ„ë…¸ì¶œ ë˜ê³ 
ì •ì„±ë“¤ì—¬ ì“´ ê¸€ì´ ë¬»íˆëŠ”ê±° ì§„ì§œ ë­ëƒ

{complaint}

ì•Œê³ ë¦¬ì¦˜ ì´í•´í•˜ëŠ” ì‚¬ëŒ ìˆìŒ?""",
            },
        ],
    },
    Mood.TIRED: {
        "free": [
            {
                "title": "ìŠ¬ëŸ¼í”„ ì˜¨ë“¯",
                "content": """ìš”ì¦˜ ê¸€ ì“°ê¸°ê°€ ë„ˆë¬´ í˜ë“¦

{tired_content}

ì–´ë–»ê²Œ ê·¹ë³µí•˜ì…¨ì–´ìš”? ì¡°ì–¸ ì¢€ ë¶€íƒ""",
            },
            {
                "title": "ë¸”ë¡œê·¸ ì‰¬ì–´ë„ ë ê¹Œìš”",
                "content": """{months}ê°œì›”ì§¸ ì‰¬ì§€ ì•Šê³  í–ˆëŠ”ë°
ì§„ì§œ ì§€ì¹¨

{tired_content}

ì¢€ ì‰¬ë©´ ì§€ìˆ˜ ë–¨ì–´ì§ˆê¹Œë´ ê±±ì •ì´ ë˜ëŠ”ë°
ì‰¬ì–´ë³¸ ë¶„ë“¤ ì–´ë• ì–´ìš”?""",
            },
            {
                "title": "ë§¤ì¼ ì“°ëŠ”ê²Œ ë§ëŠ”ê±´ì§€ ëª¨ë¥´ê² ìŒ",
                "content": """{tired_content}

ë§¤ì¼ 1í¬ í•´ì•¼ ëœë‹¤ê¸¸ë˜ ì–µì§€ë¡œ ì“°ê³  ìˆëŠ”ë°
ì´ëŸ¬ë©´ í€„ë¦¬í‹°ë§Œ ë–¨ì–´ì§€ëŠ”ê²ƒ ê°™ê³ 

ì‰¬ì—„ì‰¬ì—„ í•´ë„ ë˜ë‚˜ìš”?""",
            },
            {
                "title": "ë²ˆì•„ì›ƒ ì™”ì–´ìš”",
                "content": """ë¸”ë¡œê·¸ {months}ê°œì›”ì°¨ì¸ë° ë²ˆì•„ì›ƒ ì‹¬í•˜ê²Œ ì˜´

{tired_content}

ì˜ˆì „ì—ëŠ” ê¸€ ì“°ëŠ”ê²Œ ì¬ë°Œì—ˆëŠ”ë°
ì´ì   ì˜ë¬´ê°ìœ¼ë¡œë§Œ í•˜ê³  ìˆìŒ""",
            },
        ],
    },
    Mood.EXCITED: {
        "success": [
            {
                "title": "ì•„ ì§„ì§œ ëŒ€ë°• {keyword} {rank}!!!!",
                "content": """ë¯¸ì³¤ë‹¤ ë¯¸ì³¤ë‹¤ ë¯¸ì³¤ë‹¤

{keyword} {rank} ì°í˜!!!!

{months}ê°œì›”ë§Œì— ë“œë””ì–´ í•´ëƒˆë‹¤

{method}

ì•„ ê¸°ë¶„ ë„ˆë¬´ ì¢‹ì•„ì„œ ì†Œë¦¬ì§€ë¦„""",
            },
            {
                "title": "ì´ê±´ ì§„ì§œ ìë‘í•´ë„ ë˜ì£ ?!",
                "content": """ë¸”ë¡œê·¸ ì‹œì‘í•˜ê³  ì œì¼ ê¸°ìœ ë‚ 

{achievement} ë‹¬ì„±!!

{details}

ì§„ì§œ ëˆˆë¬¼ë‚ ë»” í–ˆìŒ ã…‹ã…‹ã…‹""",
            },
        ],
        "free": [
            {
                "title": "ì˜¤ëŠ˜ ê¸°ë¶„ ë„ˆë¬´ ì¢‹ì•„ì„œ ê¸€ ì”€",
                "content": """{achievement} ë‹¬ì„±í•œ ê¸°ë…ìœ¼ë¡œ

ì˜¤ëŠ˜ í•˜ë£¨ì¢…ì¼ ê¸°ë¶„ì´ ì¢‹ìŒ

{details}

ì—¬ëŸ¬ë¶„ë„ í¬ê¸°í•˜ì§€ ë§ˆì„¸ìš” ì§„ì§œ ë˜ê¸´ ë©ë‹ˆë‹¤""",
            },
        ],
    },
    Mood.SARCASTIC: {
        "free": [
            {
                "title": "ë¸”ë¡œê·¸ ê³ ìˆ˜ë“¤ì˜ ê³µí†µ ì¡°ì–¸ ã…‹ã…‹",
                "content": """ì»¤ë®¤ë‹ˆí‹° ëŒì•„ë‹¤ë‹ˆë©´ì„œ ì •ë¦¬í•¨

1. ê¾¸ì¤€íˆ í•˜ì„¸ìš” (= ë‹µì„ ëª¨ë¥´ê² ìŒ)
2. ì¢‹ì€ ê¸€ ì“°ì„¸ìš” (= êµ¬ì²´ì ì¸ ë°©ë²•ì€ ëª°ë¼ìš”)
3. í‚¤ì›Œë“œ ë¶„ì„í•˜ì„¸ìš” (= ë¸”ë­í¬ ì“°ì„¸ìš”)

ì´ê±° ë§ê³  ì§„ì§œ ë„ì›€ë˜ëŠ” ì¡°ì–¸ ì•„ì‹œëŠ”ë¶„""",
            },
            {
                "title": "ë¸”ë¡œê·¸ ì‹œì‘ nê°œì›”ì°¨ì˜ ê³µí†µ ì¦ìƒ",
                "content": """1ê°œì›”: ë‚˜ë„ í•  ìˆ˜ ìˆë‹¤!
3ê°œì›”: ì™œ ì•ˆë˜ì§€?
6ê°œì›”: {complaint}
12ê°œì›”: ê·¸ë˜ë„ í•´ì•¼ì§€...

ë§ì§€? ã…‹ã…‹ã…‹""",
            },
            {
                "title": "ì´ê²ƒë§Œ í•˜ë©´ ìƒìœ„ë…¸ì¶œ ëœë‹¤ëŠ”ë°ìš”",
                "content": """ì–´ë””ì„œ ì£¼ì›Œë“¤ì€ ê¿€íŒ

{method_name}

ì´ê±° í•˜ë©´ ë¬´ì¡°ê±´ ëœëŒ€ìš” ì—¬ëŸ¬ë¶„
ì•ˆë˜ë©´ ê·¸ê±´ ì—¬ëŸ¬ë¶„ íƒ“ì´ë˜ìš”

ã…ã… ë„¤ ê·¸ë ‡ë‹µë‹ˆë‹¤""",
            },
        ],
    },
}

# ëŒ“ê¸€ í…œí”Œë¦¿ (ë¬´ë“œë³„)
COMMENT_TEMPLATES_BY_MOOD = {
    Mood.HAPPY: [
        "ì˜¤ ì¶•í•˜í•´ìš”!!", "ã…Šã…‹ã…Šã…‹", "ëŒ€ë°• ë¶€ëŸ½ë‹¤", "ì™€ ì§„ì§œ?? ë©‹ìˆì–´ìš”",
        "ì €ë„ ì´ë ‡ê²Œ ë˜ê³  ì‹¶ìŒã… ", "í™”ì´íŒ…!", "ì¢‹ì€ ì •ë³´ ê°ì‚¬í•´ìš”~",
        "ìš°ì™€ ëŒ€ë‹¨í•˜ì‹œë‹¤ ì§„ì§œ", "ì–´ë–»ê²Œ í•˜ì‹ ê±°ì˜ˆìš”?", "ì €ë„ ë„ì „í•´ë³¼ê²Œìš”!",
        "ë¹„ê²°ì´ ë­ì˜ˆìš”?", "ì˜¤ ë„ˆë¬´ ì¢‹ë‹¤", "ì§„ì§œ ë¶€ëŸ½ã… ã…  ì €ë„ ì—´ì‹¬íˆ í•´ì•¼ê² ë‹¤",
        "ì´ê±° ë³´ê³  ë™ê¸°ë¶€ì—¬ ë°›ì•˜ì–´ìš”", "ë©‹ì ¸ìš”! ê³„ì† í™”ì´íŒ…ì´ì—ìš”",
    ],
    Mood.FRUSTRATED: [
        "ì €ë„ìš” ã… ã… ", "ê³µê°...", "í˜ë‚´ì„¸ìš” ã… ", "ë‹¤ë“¤ ê·¸ë˜ìš”",
        "í¬ê¸°í•˜ì§€ ë§ˆì„¸ìš”!", "ì €ë„ ê·¸ë¬ëŠ”ë° ì–´ëŠìˆœê°„ ë˜ë”ë¼êµ¬ìš”",
        "ì €ë„ ì§€ê¸ˆ ê°™ì€ ìƒí™©ì´ì—ìš”ã… ", "ê³µê° ë°±ë§Œë²ˆ", "ì•„ ì§„ì§œ í˜ë“¤ì£ ",
        "ê°™ì´ í˜ë‚´ìš”!", "ì €ë„ ë¹„ìŠ·í•œ ê²½í—˜ ìˆì–´ì„œ ê³µê°ë¨",
        "ì‹œê°„ì´ ì¢€ ê±¸ë ¤ë„ ê²°êµ­ ë˜ë”ë¼êµ¬ìš”", "ì–´ë–¤ í‚¤ì›Œë“œì¸ì§€ ì•Œë ¤ì£¼ì‹œë©´ ë´ë“œë¦´ê²Œìš”",
        "í˜¹ì‹œ ê¸€ ë§í¬ ê³µìœ  ê°€ëŠ¥í•´ìš”? í”¼ë“œë°± í•´ë“œë¦´ê²Œìš”", "ì¡°ê¸‰í•˜ê²Œ ìƒê°í•˜ì§€ ë§ˆì„¸ìš”",
    ],
    Mood.SKEPTICAL: [
        "ì €ë„ ì¢€ ì˜ë¬¸ì„", "ê¸€ì„ìš”...", "í•´ë´ì•¼ ì•Œë“¯", "ì‚¬ë°”ì‚¬ ì•„ë‹ê¹Œìš”",
        "ì €ëŠ” íš¨ê³¼ ì—†ì—ˆìŒ", "ìš´ë„ ìˆëŠ”ê²ƒ ê°™ì•„ìš”",
        "ë§ì•„ìš” ì´ê±° ë‚˜ë„ ì¢€ ì˜ì‹¬ìŠ¤ëŸ¬ì› ìŒ", "í™•ì‹¤í•œ ê·¼ê±°ê°€ ìˆì–´ì•¼ ë¯¿ì§€",
        "ì €ë„ ë¹„ìŠ·í•˜ê²Œ ìƒê°í•´ìš”", "ì‚¬ëŒë§ˆë‹¤ ë‹¤ë¥¸ ê±° ì•„ë‹ê¹Œ",
        "ì§ì ‘ í•´ë´ì•¼ ì•„ëŠ”ê±°ì£ ", "ë„ˆë¬´ ë§¹ì‹ í•˜ë©´ ì•ˆë ë“¯",
        "ì €ëŠ” í•´ë´¤ëŠ”ë° ë°˜ë°˜ì´ì—ˆì–´ìš”", "ì¼€ë°”ì¼€ì¸ê²ƒ ê°™ì•„ìš”",
    ],
    Mood.CURIOUS: [
        "ì €ë„ ê¶ê¸ˆ!", "ì•Œë ¤ì£¼ì„¸ìš”~", "ì˜¤ ê·¸ëŸ°ê°€ìš”?", "í•´ë³´ì…¨ì–´ìš”?",
        "ê²°ê³¼ ê³µìœ í•´ì£¼ì„¸ìš”!", "ì €ë„ ì•Œê³ ì‹¶ì–´ìš”",
        "ì˜¤ ì´ê±° ê¶ê¸ˆí–ˆëŠ”ë°", "ì €ë„ ê°™ì€ ê³ ë¯¼ì´ì—ìš”", "ë‹µë³€ ë‹¬ë¦¬ë©´ ì•Œë ¤ì£¼ì„¸ìš”ã…‹ã…‹",
        "ì´ê±° ë‚˜ë„ ì•Œê³ ì‹¶ë‹¤", "í˜¹ì‹œ ê²°ê³¼ ë‚˜ì˜¤ë©´ ê³µìœ í•´ì£¼ì‹¤ìˆ˜ ìˆì–´ìš”?",
        "ë¹„ìŠ·í•œ ìƒí™©ì¸ë° ì €ë„ ê¶ê¸ˆí•˜ë„¤ìš”", "ëŒ€ëŒ“ì— ë‹µë³€ ë‹¬ì•„ì£¼ì„¸ìš”!",
        "ì™€ ì´ ì§ˆë¬¸ ì§„ì§œ ê³µê°ë¨", "ì•„ì‹œëŠ”ë¶„ ë‹µë³€ì¢€ìš”~",
    ],
    Mood.HELPFUL: [
        "ê°ì‚¬í•©ë‹ˆë‹¤!", "ë„ì›€ëì–´ìš”!", "ì˜¤ ì´ê±° ëª°ëë„¤", "ê¿€íŒì´ë‹¤",
        "ì €ì¥í•´ë‘˜ê²Œìš”", "ë‚˜ì¤‘ì— ì°¸ê³ í• ê²Œìš”!",
        "ì™€ ì´ê±° ì§„ì§œ ìœ ìš©í•˜ë‹¤", "ë°”ë¡œ ì ìš©í•´ë³¼ê²Œìš”", "ì •ë¦¬ ì˜ í•´ì£¼ì…¨ë„¤ìš”",
        "ì´ëŸ° ê¸€ì´ ì§„ì§œ ë„ì›€ë¨", "ê°ì‚¬í•©ë‹ˆë‹¤ ë°”ë¡œ ì‹œë„í•´ë´„", "ê¿€íŒ ê°ì‚¬í•´ìš”!",
        "ì´ê±° ë³´ê³  ë°”ë¡œ ìˆ˜ì •í–ˆì–´ìš”", "ì´ˆë³´í•œí…Œ ì§„ì§œ í•„ìš”í•œ ë‚´ìš©ì´ë„¤ìš”",
        "ì´ ê¸€ ì¦ê²¨ì°¾ê¸° í•©ë‹ˆë‹¤", "ì•„ ì´ë˜ì„œ ê·¸ë¬êµ¬ë‚˜ ì´ì œ ì´í•´ëì–´ìš”",
    ],
    Mood.SARCASTIC: [
        "ã…‹ã…‹ã…‹ã…‹", "ê·¸ëŸ°ê°€ìš”~", "ë„¤ë„¤", "ì•„ ê·¸ë ‡êµ¬ë‚˜",
        "í ...", "ê¸€ì„ìš”", "ëª¨ë¥´ê² ë„¤ìš”",
        "ã…‡ã…‡ ë§ì•„ìš” ë§ì•„ìš”", "ì™€ ëŒ€ë‹¨í•˜ì‹œë„¤ìš”", "ê·¸ë ‡êµ°ìš” ã…‹",
        "ì˜¤ ê·¸ë˜ìš”?", "í•˜í•˜ ê³µê°ì´ë„¤ìš”", "ì•„ ë„¤...",
    ],
}

# ë³€ìˆ˜ ë°ì´í„°
TEMPLATE_DATA = {
    "keyword": [
        "ê°•ë‚¨ ë§›ì§‘", "ì„œìš¸ ì¹´í˜", "ë¶€ì‚° ì—¬í–‰", "ì œì£¼ ìˆ™ì†Œ", "í™ëŒ€ ë§›ì§‘",
        "ì„±ìˆ˜ë™ ì¹´í˜", "ì¸í…Œë¦¬ì–´ íŒ", "ë‹¤ì´ì–´íŠ¸ ì‹ë‹¨", "ìœ¡ì•„ ê¿€íŒ", "ìì·¨ ìš”ë¦¬",
        "ë…¸íŠ¸ë¶ ì¶”ì²œ", "ì—ì–´íŒŸ ë¦¬ë·°", "ì˜ì–‘ì œ ì¶”ì²œ", "ìš´ë™ ë£¨í‹´", "ë…ì„œ ì¶”ì²œ",
        "ê°•ë‚¨ ë¸ŒëŸ°ì¹˜", "ì´íƒœì› íŒŒìŠ¤íƒ€", "íŒêµ ì ì‹¬", "í•´ìš´ëŒ€ ìˆ™ì†Œ", "ê²½ì£¼ ë‹¹ì¼ì¹˜ê¸°",
        "ì•„ê¸° ì´ìœ ì‹", "ìˆ˜ë¶„í¬ë¦¼ ì¶”ì²œ", "ì—ì–´í”„ë¼ì´ì–´ ë ˆì‹œí”¼", "ì›ë£¸ ì¸í…Œë¦¬ì–´",
        "ì¿ íŒ¡ ì¶”ì²œí…œ", "ì•„ì´íŒ¨ë“œ í™œìš©ë²•", "ì½”ë”© ë…í•™", "ì£¼ì‹ ì´ˆë³´", "ì ê¸ˆ ë¹„êµ",
        "ìº í•‘ ì¥ë¹„", "ê°•ì•„ì§€ ê°„ì‹", "ê³ ì–‘ì´ ì‚¬ë£Œ", "í—¬ìŠ¤ ì´ˆë³´", "í•„ë¼í…ŒìŠ¤ í›„ê¸°",
        "ì¼ë³¸ ì˜¤ì‚¬ì¹´", "íƒœêµ­ ë°©ì½•", "ë² íŠ¸ë‚¨ ë‹¤ë‚­", "ë§¥ë¶ ë¹„êµ", "ê°¤ëŸ­ì‹œ í›„ê¸°",
        "í™ëŒ€ ë¼ë©˜", "ì—°ë‚¨ë™ ë¸ŒëŸ°ì¹˜", "ì„ì§€ë¡œ ìˆ ì§‘", "ë§ì›ë™ ë¹µì§‘", "ì‚¼ì²­ë™ ì¹´í˜",
        "ê°€ë¡œìˆ˜ê¸¸ ë§›ì§‘", "ì ì‹¤ ë°ì´íŠ¸", "ì—¬ì˜ë„ ë§›ì§‘", "ì‹ ì´Œ ìˆ ì§‘", "ê±´ëŒ€ ì¹´í˜",
    ],
    "rank": ["1ìœ„", "2ìœ„", "3ìœ„", "4ìœ„", "5ìœ„", "7ìœ„", "1í˜ì´ì§€", "ìƒìœ„ê¶Œ", "íƒ‘3", "íƒ‘5"],
    "months": ["1", "2", "3", "4", "5", "6", "7", "8", "10", "12", "14", "18"],
    "days": ["ì¼ì£¼ì¼", "10ì¼", "2ì£¼", "3ì£¼", "í•œë‹¬", "ë‘ë‹¬", "3ê°œì›”", "5ì¼"],
    "frequency": ["1", "2", "3", "ë§¤ì¼ 1", "ì´í‹€ì— 1", "ì£¼ 3", "ì£¼ 5"],
    "struggle": [
        "ì†”ì§íˆ í¬ê¸°í•˜ë ¤ í–ˆëŠ”ë°", "ì¤‘ê°„ì— ì‰¬ê¸°ë„ í–ˆëŠ”ë°", "ë§‰ë§‰í–ˆëŠ”ë°",
        "ì•ˆë ì¤„ ì•Œì•˜ëŠ”ë°", "ê¸°ëŒ€ ì•ˆí–ˆëŠ”ë°", "ì´ë²ˆì—ë„ ì•ˆë ì¤„ ì•Œì•˜ëŠ”ë°",
        "3ë²ˆì´ë‚˜ ì‹¤íŒ¨í–ˆì—ˆëŠ”ë°", "ê±°ì˜ ì ‘ìœ¼ë ¤ê³  í–ˆëŠ”ë°", "ìŠ¬ëŸ¼í”„ ì‹¬í–ˆëŠ”ë°",
        "í•œë‹¬ê°„ ë…¸ì¶œ 0ì´ì—ˆëŠ”ë°", "ê³„ì† 2í˜ì´ì§€ì—ì„œ ì•ˆì˜¬ë¼ê°”ëŠ”ë°",
    ],
    "method": [
        "í‚¤ì›Œë“œ ë¶„ì„ ì—´ì‹¬íˆ í–ˆìŒ", "ê¸€ í€„ë¦¬í‹°ì— ì‹ ê²½ì¼ìŒ", "ê¾¸ì¤€íˆë§Œ í–ˆìŒ",
        "ë¸”ë­í¬ë¡œ ê²½ìŸë¶„ì„ í–ˆìŒ", "ì‚¬ì§„ ë§ì´ ë„£ì—ˆìŒ", "2000ì ì´ìƒ ì¼ìŒ",
        "ì†Œì œëª© êµ¬ì¡° ì¡ì•„ì„œ ì¼ìŒ", "ì²´í—˜í˜• ë¦¬ë·°ë¡œ ë°”ê¿¨ìŒ", "ë‚´ ê²½í—˜ ìœ„ì£¼ë¡œ ì¼ìŒ",
        "ê²€ìƒ‰ ì˜ë„ì— ë§ê²Œ ì¼ìŒ", "ê´€ë ¨ í‚¤ì›Œë“œ 3ê°œ ì¶”ê°€í–ˆìŒ", "ì„œë¡  ì¤„ì´ê³  í•µì‹¬ë§Œ ì¼ìŒ",
        "ì§ì ‘ ì°ì€ ì‚¬ì§„ë§Œ ë„£ì—ˆìŒ", "ë³¸ë¬¸ì— ì†Œì œëª© 4ê°œ ë„£ì—ˆìŒ",
    ],
    "method_name": [
        "ë§¤ì¼ 1í¬ ì“°ë©´ì„œ í‚¤ì›Œë“œ 3ê°œ ë„£ê¸°", "ì œëª©ì— í•µì‹¬ í‚¤ì›Œë“œ ë„£ê³  ë³¸ë¬¸ 2ì²œì ì“°ê¸°",
        "ì´ì›ƒ ëŠ˜ë¦¬ë©´ì„œ ëŒ“ê¸€ ì†Œí†µ ì—´ì‹¬íˆ í•˜ê¸°", "ê²½ìŸ ë‚®ì€ ë¡±í…Œì¼ í‚¤ì›Œë“œë§Œ ê³µëµí•˜ê¸°",
        "ì‚¬ì§„ 15ì¥ ì´ìƒì— ì§ì´¬ë§Œ ì‚¬ìš©í•˜ê¸°", "ë„¤ì´ë²„ ì¸í”Œë£¨ì–¸ì„œ ì§€ì›í•˜ë©´ì„œ ê¸€ ì“°ê¸°",
        "ì‹œë¦¬ì¦ˆë¬¼ë¡œ ê°™ì€ ì£¼ì œ 5í¸ ì´ìƒ ì“°ê¸°", "ê²€ìƒ‰ì ì…ì¥ì—ì„œ ì§ˆë¬¸í˜• ì œëª© ì“°ê¸°",
        "ë¸”ë­í¬ë¡œ ìƒìœ„ê¸€ ë¶„ì„í•˜ê³  êµ¬ì¡° ë”°ë¼í•˜ê¸°", "ê¸€ ë°œí–‰ í›„ 30ë¶„ ì´ë‚´ ì„œë¡œì´ì›ƒ ë°©ë¬¸",
        "íŠ¸ë Œë“œ í‚¤ì›Œë“œ ì¡ì•„ì„œ ë‹¹ì¼ ë°œí–‰í•˜ê¸°", "ê²½ìŸë¶„ì„ ë¨¼ì € í•˜ê³  ë¹ˆí‹ˆ ê³µëµí•˜ê¸°",
    ],
    "stats": [
        "ì§€ìˆ˜ 35ì  / ë ˆë²¨ 5", "C-Rank 15ì  ì •ë„", "ì´ì›ƒ 100ëª…",
        "í¬ìŠ¤íŒ… 50ê°œ", "ì¼í‰ê·  ë°©ë¬¸ì 30ëª…", "ì´ì›ƒ 200ëª… / ì¼ë°©ë¬¸ 50",
        "C-Rank 25ì  / ê¸€ 80ê°œ", "ë°©ë¬¸ì í•˜ë£¨ 100ëª… ì •ë„", "ë¸”ë¡œê·¸ ì§€ìˆ˜ 40ì ëŒ€",
        "ë ˆë²¨ 4 / ì´ì›ƒ 150ëª…", "ì¼ ë°©ë¬¸ì 200ëª… / ì´ì›ƒ 300ëª…",
        "ê¸€ 120ê°œ / ë°©ë¬¸ì 80ëª…", "C-Rank 35ì  / ë ˆë²¨ 6",
        "ì´ì›ƒ 50ëª… / ê¸€ 30ê°œ", "ë¸”ë¡œê·¸ ì§€ìˆ˜ 20ì  ì´ˆë°˜",
    ],
    "doubt": [
        "ì§„ì§œ íš¨ê³¼ ìˆì„ê¹Œ ì‹¶ìŒ", "ë„ˆë¬´ ë»”í•œ ì–˜ê¸° ì•„ë‹Œê°€", "ê°œì¸ì°¨ ìˆì„ê²ƒ ê°™ì€ë°",
        "ê´‘ê³  ì•„ë‹Œê°€ ì‹¶ê¸°ë„ í•˜ê³ ", "ê²€ì¦ëœê±´ì§€ ëª¨ë¥´ê² ìŒ", "ìš´ì´ ì¢‹ì•˜ë˜ê±° ì•„ë‹ê¹Œ",
        "ê·¸ë•Œë‘ ì§€ê¸ˆì´ë‘ ì•Œê³ ë¦¬ì¦˜ ë‹¤ë¥´ì§€ ì•Šë‚˜", "ëŒ€í˜• ë¸”ë¡œê±°í•œí…Œë§Œ í•´ë‹¹ë˜ëŠ” ì–˜ê¸° ê°™ì€ë°",
        "ê²°êµ­ ëˆ ì“°ë¼ëŠ” ê±° ì•„ë‹˜?", "ì‹¤ì œë¡œ í•´ë³¸ì‚¬ëŒ ë³„ë¡œ ì—†ëŠ”ê²ƒ ê°™ì€ë°",
    ],
    "complaint": [
        "ê¸€ ì“¸ ì‹œê°„ì´ ì—†ìŒ", "ì•„ì´ë””ì–´ê°€ ì•ˆë– ì˜¤ë¦„", "ë§¤ë²ˆ ê°™ì€ ì–˜ê¸°ë§Œ í•˜ê²Œë¨",
        "ì¡°íšŒìˆ˜ê°€ ì•ˆë‚˜ì˜´", "ìƒìœ„ë…¸ì¶œì´ ì•ˆë¨", "ì´ì›ƒì´ ì•ˆëŠ˜ìŒ",
        "ë¶„ì„ë§Œ í•˜ê³  ì‹¤í–‰ì„ ëª»í•˜ê² ìŒ", "ì£¼ì œ ì„ ì •ì´ ì œì¼ ì–´ë ¤ì›€",
        "ì‚¬ì§„ ì°ëŠ”ê²Œ ë„ˆë¬´ ê·€ì°®ìŒ", "ê¸€ê°ì´ ê³ ê°ˆë¨",
        "ë¹„ìŠ·í•œ ê¸€ ë„ˆë¬´ ë§ì•„ì„œ ì°¨ë³„í™”ê°€ ì•ˆë¨", "ì•Œê³ ë¦¬ì¦˜ì´ ê°‘ìê¸° ë°”ë€ê²ƒ ê°™ìŒ",
    ],
    "topic": [
        "í‚¤ì›Œë“œ ë¶„ì„", "C-Rank", "ìƒìœ„ë…¸ì¶œ", "ë¸”ë¡œê·¸ ì§€ìˆ˜", "ì´ì›ƒ ëŠ˜ë¦¬ê¸°",
        "í¬ìŠ¤íŒ… ì „ëµ", "ì‚¬ì§„ ì´¬ì˜", "ê¸€ êµ¬ì¡° ì¡ê¸°", "ê²€ìƒ‰ ìµœì í™”", "ì½˜í…ì¸  ê¸°íš",
        "ë¸”ë¡œê·¸ ìˆ˜ìµí™”", "ì²´í—˜ë‹¨ í™œìš©", "ë¦¬ë·° ì‘ì„±ë²•", "íƒœê·¸ í™œìš©ë²•", "ì„œë¡œì´ì›ƒ ê´€ë¦¬",
    ],
    "achievement": [
        "ë ˆë²¨7", "ì´ì›ƒ 500ëª…", "ì²« ìƒìœ„ë…¸ì¶œ", "ì›” ë°©ë¬¸ì 1ë§Œ", "ì²« ì²´í—˜ë‹¨",
        "ì´ì›ƒ 1000ëª…", "ì¼ ë°©ë¬¸ì 500ëª…", "C-Rank 50ì ", "ì²« ì›ê³ ë£Œ",
        "ë¸”ë¡œê·¸ ì§€ìˆ˜ 60ì ", "ì—°ì† 7ì¼ ìƒìœ„ë…¸ì¶œ", "ì›” ìˆ˜ìµ 10ë§Œì›",
    ],
    "next_goal": [
        "ë ˆë²¨9", "ì´ì›ƒ 1000ëª…", "1ìœ„ ë‹¬ì„±", "ìˆ˜ìµí™”", "ì¸í”Œë£¨ì–¸ì„œ ì‹ ì²­",
        "ì›” 50ë§Œì›", "ì¼ ë°©ë¬¸ì 1000ëª…", "C-Rank 70ì ", "ì „ë¬¸ ë¸”ë¡œê±° ì „í™˜",
    ],
    "tip_content": [
        "í‚¤ì›Œë“œ ê²€ìƒ‰í•  ë•Œ ë„¤ì´ë²„ ìë™ì™„ì„±ì„ ê¼­ í™œìš©í•˜ì„¸ìš”\nì—°ê´€ê²€ìƒ‰ì–´ 3~5ê°œë¥¼ ë³¸ë¬¸ì— ìì—°ìŠ¤ëŸ½ê²Œ ë…¹ì—¬ë„£ìœ¼ë©´ ë…¸ì¶œë²”ìœ„ê°€ ë„“ì–´ì ¸ìš”",
        "ì‚¬ì§„ì€ ë¬´ì¡°ê±´ ì§ì ‘ ì°ì€ ê±° ì“°ì„¸ìš”\nì €ì‘ê¶Œ ë¬¸ì œë„ ìˆê³  ë„¤ì´ë²„ê°€ ì›ë³¸ ì´ë¯¸ì§€ë¥¼ ë” ë†’ê²Œ í‰ê°€í•œë‹¤ê³  í•˜ë”ë¼êµ¬ìš”",
        "ê¸€ ì„œë¡ ì„ ìµœëŒ€í•œ ì§§ê²Œ ì“°ì„¸ìš”\nê²€ìƒ‰í•´ì„œ ë“¤ì–´ì˜¨ ì‚¬ëŒì€ ë‹µì„ ë¹¨ë¦¬ ì•Œê³  ì‹¶ì–´í•´ìš”\nì“¸ë°ì—†ëŠ” ì¸ì‚¬ë§ ì“°ë©´ ì´íƒˆë¥ ë§Œ ì˜¬ë¼ê°",
        "ì œëª©ì— í‚¤ì›Œë“œ ë„£ì„ ë•Œ ìì—°ìŠ¤ëŸ½ê²Œ ë„£ìœ¼ì„¸ìš”\nì–µì§€ë¡œ í‚¤ì›Œë“œ ë‚˜ì—´í•˜ë©´ ì˜¤íˆë ¤ ì—­íš¨ê³¼ì„",
        "ê°™ì€ ì£¼ì œë¡œ ì‹œë¦¬ì¦ˆë¬¼ 3~5í¸ ì“°ë©´ ì£¼ì œ ì „ë¬¸ì„±ì´ ì˜¬ë¼ê°€ìš”\në„¤ì´ë²„ê°€ í•´ë‹¹ ì£¼ì œë¥¼ ì˜ ì•„ëŠ” ë¸”ë¡œê·¸ë¡œ ì¸ì‹í•¨",
        "ê¸€ ë°œí–‰ í›„ 1ì‹œê°„ ì´ë‚´ê°€ ì¤‘ìš”í•´ìš”\nê·¸ë•Œ ë“¤ì–´ì˜¤ëŠ” íŠ¸ë˜í”½ì´ ì´ˆê¸° ìˆœìœ„ì— ì˜í–¥ì„ ì¤Œ\nì„œë¡œì´ì›ƒí•œí…Œ ê³µìœ í•˜ì„¸ìš”",
        "ë³¸ë¬¸ì— ì†Œì œëª© 3~4ê°œ ë„£ìœ¼ì„¸ìš”\nê°€ë…ì„± ë†’ì•„ì§€ê³  ì²´ë¥˜ì‹œê°„ë„ ì˜¬ë¼ê°\në„¤ì´ë²„ê°€ ì²´ë¥˜ì‹œê°„ì„ ë˜ê²Œ ì¤‘ìš”í•˜ê²Œ ë´„",
        "ê²½ìŸ í‚¤ì›Œë“œ ë°”ë¡œ ë„ì „í•˜ì§€ ë§ê³ \nê´€ë ¨ëœ ì„¸ë¶€ í‚¤ì›Œë“œë¶€í„° ê³µëµí•˜ì„¸ìš”\nê±°ê¸°ì„œ ì „ë¬¸ì„± ìŒ“ì´ë©´ í° í‚¤ì›Œë“œë„ ë¨¹í˜",
        "ë¸”ë­í¬ì—ì„œ ìƒìœ„ 10ê°œ ê¸€ ë¶„ì„í•´ë³´ì„¸ìš”\nì œëª© íŒ¨í„´, ê¸€ììˆ˜, ì´ë¯¸ì§€ ìˆ˜ íŒŒì•…í•˜ë©´\në­˜ ë”°ë¼í•˜ë©´ ë˜ëŠ”ì§€ ê°ì´ ì™€ìš”",
        "ëŒ“ê¸€ ë‹µê¸€ ê¼­ê¼­ ë‹¬ì•„ì£¼ì„¸ìš”\nì†Œí†µ ì§€ìˆ˜ê°€ ë¸”ë¡œê·¸ ì§€ìˆ˜ì— í¬í•¨ë˜ëŠ”ë“¯\nì´ì›ƒ ë°©ë¬¸ë„ ìì£¼ í•˜ì‹œêµ¬ìš”",
        "ì‚¬ì§„ alt íƒœê·¸ ê¼­ ë„£ìœ¼ì„¸ìš”\nì´ë¯¸ì§€ ê²€ìƒ‰ì—ì„œë„ ìœ ì…ì´ ë“¤ì–´ì™€ìš”\nì˜ì™¸ë¡œ ì´ê±° ì•ˆí•˜ëŠ” ë¶„ë“¤ ë§ë”ë¼",
        "ê¸€ ëì— ê´€ë ¨ ê¸€ ë§í¬ 3ê°œ ì •ë„ ê±¸ì–´ë‘ì„¸ìš”\në‚´ë¶€ë§í¬ê°€ ë§ì„ìˆ˜ë¡ ë¸”ë¡œê·¸ ì²´ë¥˜ì‹œê°„ì´ ì˜¬ë¼ê°€ìš”",
        "ìƒˆë²½ì´ë‚˜ ì´ë¥¸ ì•„ì¹¨ì— ë°œí–‰í•˜ì§€ ë§ˆì„¸ìš”\nì‚¬ëŒë“¤ì´ ë§ì´ ê²€ìƒ‰í•˜ëŠ” ì‹œê°„ëŒ€ì— ë§ì¶° ë°œí–‰í•˜ë©´\nì´ˆê¸° ìœ ì…ì´ í™• ë‹¤ë¦„",
        "ë¦¬ë·° ì“¸ ë•Œ ë‹¨ì ë„ ê¼­ ì“°ì„¸ìš”\nì¥ì ë§Œ ë‚˜ì—´í•˜ë©´ ê´‘ê³ ì²˜ëŸ¼ ë³´ì—¬ì„œ\nì˜¤íˆë ¤ ì‹ ë¢°ë„ê°€ ë–¨ì–´ì ¸ìš”",
        "ì œëª© 30ì ì´ë‚´ë¡œ ì“°ì„¸ìš”\në„ˆë¬´ ê¸¸ë©´ ê²€ìƒ‰ê²°ê³¼ì—ì„œ ì˜ë¦¬ê³ \ní´ë¦­ë¥ ì´ ë–¨ì–´ì ¸ìš”",
    ],
    "details": [
        "ë§¤ì¼ ì•„ì¹¨ 6ì‹œì— ì¼ì–´ë‚˜ì„œ ê¸€ ì¼ìŒ\ní‡´ê·¼ í›„ì—ëŠ” ë„ˆë¬´ í”¼ê³¤í•´ì„œ ì•ˆë˜ë”ë¼",
        "í‚¤ì›Œë“œ ë¦¬ì„œì¹˜ë§Œ 3ì‹œê°„ì”© í–ˆìŒ\nì¢‹ì€ í‚¤ì›Œë“œ ì°¾ìœ¼ë©´ ê·¸ë‚  ë°”ë¡œ ê¸€ ì”€",
        "ì£¼ë§ì— ëª°ì•„ì„œ 5ê°œì”© ì¨ë†“ê³ \ní‰ì¼ì— í•˜ë‚˜ì”© ë°œí–‰í–ˆìŒ",
        "ì²˜ìŒ 3ê°œì›”ì€ ì§„ì§œ ì•„ë¬´ ë°˜ì‘ ì—†ì—ˆìŒ\n4ê°œì›”ì§¸ë¶€í„° ì„œì„œíˆ ì˜¬ë¼ì˜¤ê¸° ì‹œì‘",
        "ìƒìœ„ ë¸”ë¡œê·¸ ê¸€ 50ê°œ ì •ë„ ë¶„ì„í–ˆìŒ\nê³µí†µì  íŒŒì•…í•˜ê³  ë‚´ ìŠ¤íƒ€ì¼ë¡œ ë³€í˜•í•¨",
        "ë¸”ë­í¬ ë¶„ì„ ê²°ê³¼ ë³´ê³  ì „ëµ ìˆ˜ì •í–ˆìŒ\nì•½ì  ë¶€ë¶„ ì§‘ì¤‘ ê°œì„ í•˜ë‹ˆê¹Œ ë°”ë¡œ íš¨ê³¼ ë´„",
        "ì´ˆë°˜ì— ì´ì›ƒ ëŠ˜ë¦¬ê¸°ì—ë§Œ ì§‘ì¤‘í–ˆìŒ\nì´ì›ƒ 300ëª… ë„˜ìœ¼ë‹ˆê¹Œ ìì—° ìœ ì…ë„ ìƒê¸°ë”ë¼",
        "ê¸€ í•˜ë‚˜ë‹¹ í‰ê·  3ì‹œê°„ íˆ¬ìí–ˆìŒ\nëŒ€ì¶© ì“°ë©´ ì•ˆëœë‹¤ëŠ”ê±¸ ê¹¨ë‹¬ì€ í›„ë¡œ",
    ],
    "attempt_content": [
        "ë§¤ì¼ ê¸€ 2ê°œì”© ì˜¬ë¦¬ê³  ìˆëŠ”ë°\në°©ë¬¸ìëŠ” í•˜ë£¨ 20ëª…ë„ ì•ˆë¨\nê¸€ ìˆ˜ë§Œ ëŠ˜ë¦°ë‹¤ê³  ë˜ëŠ”ê²Œ ì•„ë‹Œê±´ì§€",
        "í‚¤ì›Œë“œ ë¶„ì„í•´ì„œ ê²½ìŸ ë‚®ì€ê±° ê³¨ëëŠ”ë°\nê·¸ë˜ë„ ìƒìœ„ë…¸ì¶œì´ ì•ˆë¨\në‚´ ì§€ìˆ˜ê°€ ë„ˆë¬´ ë‚®ì€ê±´ê°€",
        "ì‚¬ì§„ 15ì¥, ë³¸ë¬¸ 3000ì ì´ìƒ ì“°ëŠ”ë°\në¹„ìŠ·í•œ ë¶„ëŸ‰ì¸ ë‹¤ë¥¸ ë¸”ë¡œê·¸ëŠ” 1ë“±ì¸ë° ë‚˜ëŠ” ì•ˆë³´ì„",
        "ì´ì›ƒ 500ëª…ì¸ë° ì‹¤ì œ ë°©ë¬¸í•˜ëŠ” ì‚¬ëŒì€ 10ëª…ë„ ì•ˆë¨\nì´ì›ƒ ìˆ˜ê°€ ì˜ë¯¸ê°€ ìˆê¸´ í•œê±´ì§€",
        "3ê°œì›”ì§¸ ê°™ì€ í‚¤ì›Œë“œë¡œ ë„ì „ì¤‘ì¸ë°\nì²˜ìŒì—” 7í˜ì´ì§€ì˜€ë‹¤ê°€ ì§€ê¸ˆ 4í˜ì´ì§€\nê·¼ë° 1í˜ì´ì§€ë¥¼ ëª» ëš«ê² ìŒ",
    ],
    "skeptical_points": [
        "ìƒìœ„ë…¸ì¶œ ëë‹¤ëŠ” ì‚¬ëŒë“¤\nì§„ì§œ ê·¸ í‚¤ì›Œë“œê°€ ê²€ìƒ‰ëŸ‰ì´ ìˆê¸´ í•œê±´ì§€\nê²½ìŸ 0ì¸ í‚¤ì›Œë“œë¡œ 1ë“±í•œê±° ì•„ë‹˜?",
        "ì´ì›ƒ 1000ëª… ìë‘í•˜ëŠ”ë°\nì„œë¡œì´ì›ƒ ì•„ë‹ˆë©´ ì˜ë¯¸ì—†ì§€ ì•Šë‚˜\nìˆ«ìë§Œ ë§ìœ¼ë©´ ë­í•˜ë‚˜",
        "ì›” ìˆ˜ìµ 100ë§Œì›ì´ë¼ëŠ” ì‚¬ëŒë“¤\nì²´í—˜ë‹¨ ë¬¼ê±´ê°’ í¬í•¨ì¸ê±° ì•„ë‹Œê°€\nìˆœìˆ˜ í˜„ê¸ˆ ìˆ˜ìµì´ ê¶ê¸ˆ",
        "ë§¤ì¼ 1í¬ í•˜ë¼ëŠ”ë°\ní€„ë¦¬í‹° ë‚®ì€ ê¸€ ë§¤ì¼ ì˜¬ë¦¬ëŠ”ê±°ë‘\nì¢‹ì€ ê¸€ ì£¼ 3ê°œ ì˜¬ë¦¬ëŠ”ê±°ë‘ ë­ê°€ ë‚˜ìŒ?",
        "ë¸”ë¡œê·¸ ì§€ìˆ˜ ê°œë… ìì²´ê°€ ì˜ì‹¬ë¨\në„¤ì´ë²„ê°€ ê³µì‹ì ìœ¼ë¡œ ë°œí‘œí•œ ì  ì—†ëŠ”ë°\në‹¤ë“¤ ì¶”ì¸¡ìœ¼ë¡œ ì–˜ê¸°í•˜ëŠ”ê±° ì•„ë‹˜?",
    ],
    "tired_content": [
        "3ê°œì›”ì§¸ ë§¤ì¼ ê¸€ ì“°ëŠ”ë°\nì¡°íšŒìˆ˜ ë³€í™”ê°€ ì—†ìœ¼ë‹ˆê¹Œ ì˜ìš•ì´ ì•ˆë‚¨\nì´ê±¸ ì™œ í•˜ê³ ìˆë‚˜ ì‹¶ìŒ",
        "ì£¼ë³€ì—ì„œëŠ” ë¸”ë¡œê·¸ ê·¸ë§Œí•˜ë¼ê³  í•˜ëŠ”ë°\në‚˜ë¦„ ì• ì°©ì´ ìˆì–´ì„œ ëª» ë†“ê² ê³ \nê·¼ë° ì„±ê³¼ê°€ ì•ˆë‚˜ë‹ˆê¹Œ í˜ë“¦",
        "ê¸€ê° ê³ ê°ˆì´ ì‹¬ê°í•¨\në§¤ì¼ ë­˜ ì¨ì•¼í• ì§€ ëª¨ë¥´ê² ê³ \nì–µì§€ë¡œ ì“°ë©´ í€„ë¦¬í‹°ë„ ì•ˆë‚˜ì˜´",
        "ë‹¤ë¥¸ ë¸”ë¡œê±°ë“¤ ë³´ë©´ ì‰½ê²Œ í•˜ëŠ”ê²ƒ ê°™ì€ë°\në‚˜ë§Œ ì´ë ‡ê²Œ í˜ë“ ê±´ì§€\në­˜ ì˜ëª»í•˜ê³  ìˆëŠ”ê±´ì§€ë„ ëª¨ë¥´ê² ìŒ",
        "ë¸”ë¡œê·¸ ì•± ì¼œê¸°ê°€ ì‹«ì–´ì§\nì˜ˆì „ì—ëŠ” ì¬ë°Œì—ˆëŠ”ë°\nìˆ«ìì— ì§‘ì°©í•˜ë‹¤ë³´ë‹ˆ ì¬ë¯¸ë¥¼ ìƒì€ë“¯",
    ],
}


def fill_template(template: str, user: VirtualUser) -> str:
    """í…œí”Œë¦¿ì— ë³€ìˆ˜ ì±„ìš°ê¸°"""
    result = template

    for key, values in TEMPLATE_DATA.items():
        placeholder = "{" + key + "}"
        while placeholder in result:
            result = result.replace(placeholder, random.choice(values), 1)

    # ì‚¬ìš©ì ì •ë³´ë¡œ ëŒ€ì²´
    result = result.replace("{user_months}", str(user.blog_months))

    return result


# ============ ì œëª© ë³€í˜• ì‹œìŠ¤í…œ (ê³ ìœ  ì œëª© ìƒì„±) ============

# ì œëª© ì ‘ë¯¸ì‚¬ ê·¸ë£¹
TITLE_SUFFIXES_EMOTION = [
    "ã… ã… ", "ã…œã…œ", "ã…‹ã…‹", "ã…‹ã…‹ã…‹", "ã…ã…", "ã…", "..", "...", ";;;",
    "ã„·ã„·", "ã… ", "ã…œ", "ã…‹", "!!", "!", "~", "ã…ã…ã…",
]

TITLE_SUFFIXES_PERIOD = [
    "(1ê°œì›”ì°¨)", "(2ê°œì›”ì°¨)", "(3ê°œì›”ì°¨)", "(4ê°œì›”ì°¨)", "(5ê°œì›”ì°¨)",
    "(6ê°œì›”ì°¨)", "(8ê°œì›”ì°¨)", "(10ê°œì›”ì°¨)", "(1ë…„ì°¨)", "(ì´ˆë³´)",
    "(ì…ë¬¸)", "(ì¤‘ê¸‰)", "(nê°œì›”ì°¨)",
]

TITLE_SUFFIXES_REACTION = [
    "ì§„ì§œ", "ì•„", "í›„", "í•˜", "í ", "ìœ¼ìœ¼", "ì•„ì•„",
    "ã„¹ã…‡", "ì†”ì§íˆ", "ëŒ€ì¶©", "ê·¸ëƒ¥",
]

TITLE_SUFFIXES_TAG = [
    "(ë¸”ë¡œê·¸)", "(ì¼ìƒ)", "(ê³ ë¯¼)", "(ì¡ë‹´)", "(ê²½í—˜ë‹´)",
    "(í›„ê¸°)", "(í˜„ì‹¤)", "(TMI)", "(ê³µê°)", "(í† í¬)",
]

ALL_TITLE_SUFFIXES = (
    TITLE_SUFFIXES_EMOTION
    + TITLE_SUFFIXES_PERIOD
    + TITLE_SUFFIXES_REACTION
    + TITLE_SUFFIXES_TAG
)

# â˜… ì œëª© ì• ìˆ˜ì‹ì–´ (ì¡°í•©ìœ¼ë¡œ ê³ ìœ  ì œëª© ìƒì„±)
TITLE_PREFIXES = [
    "", "", "", "",  # 50% í™•ë¥ ë¡œ ì ‘ë‘ì‚¬ ì—†ìŒ
    "ì†”ì§íˆ ", "ê·¼ë° ", "ì•„ ", "ìŒ ", "ì˜¤ëŠ˜ ",
    "ê°‘ìê¸° ", "í˜¹ì‹œ ", "ì§„ì§œ ", "ì™€ ", "í— ",
    "ì–´ì œ ", "ë°©ê¸ˆ ", "ëŒ€ì¶© ",
]

# â˜… ì œëª© ì£¼ì œ ìˆ˜ì‹ì–´ (ì£¼ì œ+ê¸°ê°„ ì¡°í•©)
TITLE_TOPIC_MODIFIERS = [
    "ë¸”ë¡œê·¸", "í¬ìŠ¤íŒ…", "í‚¤ì›Œë“œ", "ìƒìœ„ë…¸ì¶œ", "ë°©ë¬¸ì",
    "ì´ì›ƒ", "ëŒ“ê¸€", "ì¡°íšŒìˆ˜", "ìˆ˜ìµ", "ì²´í—˜ë‹¨",
    "ê¸€ì“°ê¸°", "ì‚¬ì§„", "ê²€ìƒ‰ìœ ì…", "C-Rank", "ì§€ìˆ˜",
]

TITLE_PERIOD_MODIFIERS = [
    "1ê°œì›”", "2ê°œì›”", "3ê°œì›”", "4ê°œì›”", "5ê°œì›”", "6ê°œì›”",
    "8ê°œì›”", "10ê°œì›”", "1ë…„", "100ì¼", "ë°˜ë…„",
    "2ì£¼", "í•œë‹¬", "ë‘ë‹¬", "ì„ë‹¬",
]

# â˜… ì™„ì „íˆ ìƒˆë¡œìš´ ì œëª© ìƒì„±ìš© íŒ¨í„´
UNIQUE_TITLE_PATTERNS = {
    "question": [
        "{prefix}{topic} {period}ì°¨ì¸ë° ì´ê²Œ ë§ë‚˜ìš”",
        "{prefix}{topic} ê´€ë ¨ ì§ˆë¬¸ í•˜ë‚˜ë§Œìš”",
        "{prefix}{period} í–ˆëŠ”ë° {topic}ì´ ì•ˆë¼ìš”",
        "{prefix}{topic} ì–´ë–»ê²Œ í•˜ëŠ”ê±°ì˜ˆìš”",
        "{prefix}ì´ê±° {topic} ê´€ë ¨ì¸ë° ë„ì›€ì¢€",
        "{prefix}{period}ì§¸ {topic} ì¤‘ì¸ë° ì¡°ì–¸ ë¶€íƒ",
        "{prefix}{topic} ê²½í—˜ìë¶„ ì¢€ ì•Œë ¤ì£¼ì„¸ìš”",
        "{prefix}ìš”ì¦˜ {topic} ë„ˆë¬´ ì–´ë ¤ì›Œìš”",
        "{prefix}ëˆ„ê°€ {topic} ì¢€ ì„¤ëª…í•´ì£¼ì„¸ìš”",
        "{prefix}{topic} í•˜ì‹œëŠ” ë¶„ë“¤ ì–´ë– ì„¸ìš”",
    ],
    "free": [
        "{prefix}ì˜¤ëŠ˜ {topic} í•˜ë©´ì„œ ëŠë‚€ ì ",
        "{prefix}{topic} ê´€ë ¨ ì¡ë‹´",
        "{prefix}ê·¸ëƒ¥ {topic} ì´ì•¼ê¸° ì¢€ í• ê²Œìš”",
        "{prefix}{period}ì°¨ {topic} í˜„í™©",
        "{prefix}ìš”ì¦˜ {topic} ê·¼í™©",
        "{prefix}ì˜¤ëŠ˜ì˜ {topic} ê¸°ë¡",
        "{prefix}ì¼ê¸° ëŒ€ì‹  {topic} ì´ì•¼ê¸°",
        "{prefix}ì‹¬ì‹¬í•´ì„œ {topic} ì´ì•¼ê¸° ì”€",
        "{prefix}{topic} í•˜ë‹¤ê°€ ìƒê°ë‚œ ê²ƒ",
        "{prefix}ë¸”ë¡œê·¸ {period} ëë„¤ìš”",
    ],
    "tip": [
        "{prefix}{period} í•´ë³´ê³  ì•Œê²Œëœ {topic} íŒ",
        "{prefix}{topic} ì´ê²ƒë§Œ ì•Œë©´ ë¨",
        "{prefix}ì œê°€ í•´ë³¸ {topic} ë°©ë²• ê³µìœ ",
        "{prefix}{topic} íš¨ê³¼ ë´¤ë˜ ë°©ë²• ì•Œë ¤ë“œë¦¼",
        "{prefix}{period} ì‚½ì§ˆ ëì— ê¹¨ë‹¬ì€ {topic}",
        "{prefix}{topic} ì‰½ê²Œ í•˜ëŠ” ë²• ì •ë¦¬",
        "{prefix}ì´ˆë³´í•œí…Œ ì•Œë ¤ì£¼ëŠ” {topic} í•µì‹¬",
        "{prefix}{topic} ì‹¤ì „ ê²½í—˜ë‹´ ë‚˜ëˆ”",
        "{prefix}ë“œë””ì–´ ê¹¨ë‹¬ì€ {topic} ë¹„ê²°",
        "{prefix}{topic} ì´ê±° ëª¨ë¥´ë©´ ì†í•´",
    ],
    "success": [
        "{prefix}{period}ë§Œì— {topic} ì„±ê³µí–ˆì–´ìš”",
        "{prefix}ë“œë””ì–´ {topic} í•´ëƒˆìŠµë‹ˆë‹¤",
        "{prefix}{topic} ë‹¬ì„± ì¸ì¦",
        "{prefix}{period} ê±¸ë ¤ì„œ {topic} ëìŒ",
        "{prefix}ë¸”ë¡œê·¸ {period}ì°¨ {topic} í›„ê¸°",
        "{prefix}ëª©í‘œí–ˆë˜ {topic} ë“œë””ì–´ ë‹¬ì„±",
        "{prefix}{topic} ì²˜ìŒ ì„±ê³µí•œ ë‚ ",
        "{prefix}{period} ë…¸ë ¥ ëì— {topic} ì„±ê³¼",
    ],
}

# â˜… ê³ ìœ  ë‚´ìš© ìƒì„±ìš© ë¬¸ì¥ í’€
CONTENT_OPENERS = {
    "question": [
        "ì§ˆë¬¸ í•˜ë‚˜ë§Œ í• ê²Œìš”", "ê¶ê¸ˆí•œê²Œ ìˆëŠ”ë°ìš”", "ì´ê±° ì•„ì‹œëŠ” ë¶„ ìˆë‚˜ìš”",
        "ë„ì›€ì´ í•„ìš”í•´ì„œ ê¸€ ì˜¬ë¦½ë‹ˆë‹¤", "í˜¹ì‹œ ê²½í—˜ìë¶„ ê³„ì‹ ê°€ìš”",
        "ì´ˆë³´ ì§ˆë¬¸ì´ë¼ ë¶€ë„ëŸ½ì§€ë§Œ", "ì´ëŸ° ê²½í—˜ ìˆìœ¼ì‹  ë¶„",
        "ë‹µë‹µí•´ì„œ ê¸€ ë‚¨ê²¨ìš”", "ì¡°ì–¸ ì¢€ ë¶€íƒë“œë ¤ìš”", "ì´ê²Œ ì •ìƒì¸ê±´ì§€ ëª¨ë¥´ê² ì–´ìš”",
    ],
    "free": [
        "ê·¸ëƒ¥ ë„ì ì—¬ë´…ë‹ˆë‹¤", "ì¼ê¸° ëŒ€ì‹  ì¨ë´ìš”", "ì˜¤ëŠ˜ ëŠë‚€ ì  ê¸°ë¡",
        "ë¸”ë¡œê·¸ í•˜ë©´ì„œ ìƒê°í•œ ê²ƒ", "ì¡ë‹´í•˜ê³  ì‹¶ì–´ì„œ ì™”ì–´ìš”",
        "ì‹¬ì‹¬í•´ì„œ ê¸€ ì”€", "ì˜¤ëŠ˜ì˜ ë¸”ë¡œê·¸ í˜„í™©", "ê·¸ëƒ¥ ë‚˜ëˆ„ê³  ì‹¶ì€ ì´ì•¼ê¸°",
        "ì†Œì†Œí•œ ê·¼í™© ê³µìœ ", "ë¸”ë¡œê·¸ ì¼ì§€ ë‚¨ê²¨ìš”",
    ],
    "tip": [
        "ì œê°€ ì§ì ‘ í•´ë³¸ ë°©ë²•ì´ì—ìš”", "ì´ê±° ì§„ì§œ íš¨ê³¼ ìˆì—ˆì–´ìš”",
        "ì´ˆë³´ë¶„ë“¤ ì°¸ê³ í•˜ì„¸ìš”", "ì œ ê²½í—˜ ê³µìœ í•©ë‹ˆë‹¤",
        "ì‚½ì§ˆ ëì— ì•Œê²Œ ëœ ë°©ë²•", "ì´ê±° í•˜ë‚˜ë¡œ ë°”ë€Œì—ˆì–´ìš”",
        "ì‹¤ì „ì—ì„œ í†µí•œ ë°©ë²•", "ìš”ì¦˜ ì œê°€ ì“°ëŠ” ì „ëµ",
        "ëª¨ë¥´ë©´ ì†í•´ì¸ íŒ", "ì´ ë°©ë²• ê¼­ í•´ë³´ì„¸ìš”",
    ],
    "success": [
        "ë“œë””ì–´ í•´ëƒˆì–´ìš”", "ì„±ê³µí–ˆìŠµë‹ˆë‹¤!!", "ê°ê²©ìŠ¤ëŸ¬ì›Œì„œ ê¸€ ë‚¨ê²¨ìš”",
        "í¬ê¸° ì•ˆí•˜ê¸¸ ì˜í–ˆì–´ìš”", "ê¿ˆë§Œ ê°™ì€ ê²°ê³¼",
        "ê¾¸ì¤€íˆ í•œ ë³´ëŒì´ ìˆë„¤ìš”", "ì§„ì§œ ëˆˆë¬¼ë‚ ë»” í–ˆì–´ìš”",
        "ì´ ê¸°ë¶„ ê³µìœ í•˜ê³  ì‹¶ì–´ì„œ", "ë“œë””ì–´ ëª©í‘œ ë‹¬ì„±", "ê¸°ë¶„ ì¢‹ì•„ì„œ ìë‘í•©ë‹ˆë‹¤",
    ],
}

CONTENT_BODIES = {
    "question": [
        "ë¸”ë¡œê·¸ {months}ê°œì›”ì§¸ì¸ë° ë°©ë¬¸ìê°€ í•˜ë£¨ {visitors}ëª…ë°–ì— ì•ˆë¼ìš”",
        "í¬ìŠ¤íŒ… {posts}ê°œ ìŒ“ì•˜ëŠ”ë° ìƒìœ„ë…¸ì¶œì´ í•œë²ˆë„ ì•ˆëì–´ìš”",
        "ì´ì›ƒ {neighbors}ëª…ì¸ë° ì‹¤ì œ ë°©ë¬¸í•˜ëŠ” ì‚¬ëŒì€ ê±°ì˜ ì—†ì–´ìš”",
        "í‚¤ì›Œë“œ ë¶„ì„í•´ì„œ ì“°ëŠ”ë°ë„ ê²€ìƒ‰ì— ì•ˆì¡í˜€ìš”",
        "ê²½ìŸ ë‚®ì€ í‚¤ì›Œë“œë§Œ ê³¨ë¼ ì“°ëŠ”ë°ë„ íš¨ê³¼ê°€ ì—†ì–´ìš”",
        "ë§¤ì¼ {posts_per_day}ê°œì”© ì˜¬ë¦¬ëŠ”ë° ì´ê²Œ ë§ëŠ”ê±´ì§€ ëª¨ë¥´ê² ì–´ìš”",
        "ë‹¤ë¥¸ ë¸”ë¡œê·¸ ë³´ë©´ ì‰½ê²Œ í•˜ëŠ”ê²ƒ ê°™ì€ë° ì €ë§Œ ì•ˆë˜ëŠ” ëŠë‚Œ",
        "ìˆ˜ìµì´ {months}ê°œì›”ì§¸ 0ì›ì´ì—ìš” ë­ê°€ ë¬¸ì œì¼ê¹Œìš”",
        "ê¸€ í•˜ë‚˜ì— {hours}ì‹œê°„ì”© íˆ¬ìí•˜ëŠ”ë° ì¡°íšŒìˆ˜ê°€ í•œìë¦¬ì—ìš”",
        "ì‚¬ì§„ë„ ë§ì´ ë„£ê³  ê¸€ë„ ê¸¸ê²Œ ì“°ëŠ”ë° ë°˜ì‘ì´ ì—†ì–´ìš”",
    ],
    "free": [
        "ì˜¤ëŠ˜ í¬ìŠ¤íŒ… {posts_per_day}ê°œ ë°œí–‰ ì™„ë£Œ",
        "ë¸”ë¡œê·¸ {months}ê°œì›”ì°¨ ì†Œì†Œí•œ ì¼ìƒ",
        "ë°©ë¬¸ì {visitors}ëª… ë„˜ê¸°ëŠ”ê²Œ ëª©í‘œì¸ë° ì‰½ì§€ ì•Šë„¤ìš”",
        "ìš”ì¦˜ ê¸€ê°ì´ ê³ ê°ˆë¼ì„œ ë­˜ ì¨ì•¼í• ì§€ ê³ ë¯¼",
        "í‡´ê·¼í•˜ê³  ë¸”ë¡œê·¸ ì“°ëŠ” ì¼ìƒì´ ë°˜ë³µë˜ëŠ” ì¤‘",
        "ì£¼ë§ì— ëª°ì•„ì„œ {posts_per_day}ê°œ ì¨ë†¨ì–´ìš”",
        "ì´ì›ƒë¶„ë“¤ì´ë‘ ì†Œí†µí•˜ëŠ”ê²Œ ì œì¼ ì¬ë°Œì–´ìš”",
        "ì˜¤ëŠ˜ ì²« ëŒ“ê¸€ ë‹¬ë ¸ëŠ”ë° ê¸°ë¶„ ì¢‹ë„¤ìš”",
        "ë¸”ë¡œê·¸ í•˜ë©´ì„œ ê¸€ì“°ê¸° ì‹¤ë ¥ì´ ëŠ˜ì€ ê²ƒ ê°™ì•„ìš”",
        "ì¡°ìš©íˆ ê¾¸ì¤€íˆ í•˜ê³  ìˆìŠµë‹ˆë‹¤",
    ],
    "tip": [
        "í‚¤ì›Œë“œë¥¼ ì œëª©ì— ìì—°ìŠ¤ëŸ½ê²Œ ë„£ìœ¼ì„¸ìš”",
        "ì‚¬ì§„ì€ ì§ì ‘ ì°ì€ ê²ƒë§Œ ì˜¬ë¦¬ì„¸ìš”",
        "ì†Œì œëª©ì„ 3~4ê°œ ë„£ìœ¼ë©´ ê°€ë…ì„±ì´ í™• ì˜¬ë¼ê°€ìš”",
        "ê¸€ ë°œí–‰ ì‹œê°„ëŒ€ê°€ ì¤‘ìš”í•´ìš” ì˜¤ì „ 9~11ì‹œê°€ ì¢‹ì•„ìš”",
        "ì´ì›ƒ ì†Œí†µì„ ê¾¸ì¤€íˆ í•˜ë©´ ì´ˆê¸° ìœ ì…ì´ ìƒê²¨ìš”",
        "ë³¸ë¬¸ 2000ì ì´ìƒì€ ì¨ì•¼ ìƒìœ„ë…¸ì¶œì— ìœ ë¦¬í•´ìš”",
        "íƒœê·¸ëŠ” 5~8ê°œê°€ ì ë‹¹í•©ë‹ˆë‹¤",
        "ì‹œë¦¬ì¦ˆë¬¼ë¡œ ê°™ì€ ì£¼ì œë¥¼ 3í¸ ì´ìƒ ì“°ë©´ ì „ë¬¸ì„±ì´ ì˜¬ë¼ê°€ìš”",
        "ê²½ìŸ ë‚®ì€ ë¡±í…Œì¼ í‚¤ì›Œë“œë¶€í„° ê³µëµí•˜ì„¸ìš”",
        "ë¦¬ë·° ì“¸ ë•Œ ë‹¨ì ë„ ê¼­ í¬í•¨í•˜ë©´ ì‹ ë¢°ë„ê°€ ì˜¬ë¼ê°€ìš”",
    ],
    "success": [
        "ìƒìœ„ë…¸ì¶œ ì²˜ìŒ ë‹¬ì„±! í‚¤ì›Œë“œëŠ” {keyword}",
        "ì¼ë°©ë¬¸ì {visitors}ëª… ëŒíŒŒí–ˆì–´ìš”",
        "ì´ì›ƒ {neighbors}ëª… ë‹¬ì„± ê¸°ë…",
        "ì• ë“œí¬ìŠ¤íŠ¸ ì²« ìˆ˜ìµ ë°œìƒ",
        "ì²´í—˜ë‹¨ ì²˜ìŒìœ¼ë¡œ í•©ê²©í–ˆì–´ìš”",
        "ê¸€ {posts}ê°œ ë‹¬ì„± ê¸°ë…",
        "ë¸”ë¡œê·¸ {months}ê°œì›” ì§€ì† ì„±ê³µ",
        "ê²€ìƒ‰ ìœ ì…ì´ ì²˜ìŒìœ¼ë¡œ 100ì„ ë„˜ì—ˆì–´ìš”",
        "ì²« í˜‘ì°¬ ì œì˜ë¥¼ ë°›ì•˜ìŠµë‹ˆë‹¤",
        "ëª©í‘œí–ˆë˜ í‚¤ì›Œë“œ 1í˜ì´ì§€ ì§„ì… ì„±ê³µ",
    ],
}

CONTENT_CLOSERS = [
    "ë¹„ìŠ·í•œ ê²½í—˜ ìˆìœ¼ì‹  ë¶„ ê³µìœ í•´ì£¼ì„¸ìš”",
    "ì¡°ì–¸ ë¶€íƒë“œë ¤ìš”",
    "ë‹¤ë“¤ ì–´ë–»ê²Œ í•˜ê³  ê³„ì‹œë‚˜ìš”?",
    "í™”ì´íŒ…ì…ë‹ˆë‹¤!",
    "ê°™ì´ ì„±ì¥í•´ìš”",
    "ì˜ê²¬ì´ë‚˜ íŒ ìˆìœ¼ë©´ ëŒ“ê¸€ ë‚¨ê²¨ì£¼ì„¸ìš”",
    "ì½ì–´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤",
    "ê³µê°í•˜ì‹œë©´ ì¢‹ì•„ìš” ë¶€íƒë“œë ¤ìš”",
    "í˜ë“¤ì§€ë§Œ í¬ê¸°í•˜ì§€ ë§™ì‹œë‹¤",
    "ë‹¤ë“¤ ì˜¤ëŠ˜ë„ ìˆ˜ê³ í•˜ì…¨ì–´ìš”",
    "ë¸”ë¡œê·¸ í•˜ì‹œëŠ” ë¶„ë“¤ ë‹¤ ì‘ì›í•©ë‹ˆë‹¤",
    "ê¶ê¸ˆí•œê±° ìˆìœ¼ë©´ ëŒ“ê¸€ë¡œ ë¬¼ì–´ë³´ì„¸ìš”",
]


def _generate_unique_title(category: str, user: VirtualUser) -> str:
    """ì¹´í…Œê³ ë¦¬ì™€ ìœ ì € ì •ë³´ ê¸°ë°˜ìœ¼ë¡œ ê³ ìœ í•œ ì œëª© ìƒì„±.

    íŒ¨í„´ ì¡°í•©ìœ¼ë¡œ ìˆ˜ì²œ ê°€ì§€ì˜ ê³ ìœ  ì œëª© ìƒì„± ê°€ëŠ¥.
    """
    patterns = UNIQUE_TITLE_PATTERNS.get(category, UNIQUE_TITLE_PATTERNS["free"])
    pattern = random.choice(patterns)

    prefix = random.choice(TITLE_PREFIXES)
    topic = random.choice(TITLE_TOPIC_MODIFIERS)
    period = random.choice(TITLE_PERIOD_MODIFIERS)

    title = pattern.format(prefix=prefix, topic=topic, period=period)

    # 30% í™•ë¥ ë¡œ ê°ì • ì ‘ë¯¸ì‚¬ ì¶”ê°€
    if random.random() < 0.3:
        suffix = random.choice(ALL_TITLE_SUFFIXES)
        title = f"{title} {suffix}"

    return title.strip()


def _generate_unique_content(category: str, user: VirtualUser) -> str:
    """ì¹´í…Œê³ ë¦¬ì™€ ìœ ì € ì •ë³´ ê¸°ë°˜ìœ¼ë¡œ ê³ ìœ í•œ ë³¸ë¬¸ ìƒì„±.

    3íŒŒíŠ¸(ì˜¤í”„ë„ˆ + ë³¸ë¬¸ + í´ë¡œì €) ì¡°í•©ìœ¼ë¡œ ê³ ìœ  ì½˜í…ì¸  ìƒì„±.
    """
    months = str(user.blog_months) if user.blog_months > 0 else str(random.randint(1, 18))
    visitors = str(random.choice([10, 15, 20, 30, 40, 50, 80, 100, 150, 200, 300, 500]))
    posts = str(random.choice([20, 30, 50, 70, 80, 100, 120, 150, 200, 300]))
    neighbors = str(random.choice([30, 50, 80, 100, 150, 200, 300, 500, 700, 1000]))
    posts_per_day = str(random.choice([1, 2, 3, 4, 5]))
    hours = str(random.choice([1, 2, 3, 4]))
    keyword = random.choice(TEMPLATE_DATA["keyword"])

    opener = random.choice(CONTENT_OPENERS.get(category, CONTENT_OPENERS["free"]))
    bodies = CONTENT_BODIES.get(category, CONTENT_BODIES["free"])
    # ë³¸ë¬¸ 1~2ê°œ ì¡°í•©
    body_parts = random.sample(bodies, min(random.randint(1, 2), len(bodies)))
    closer = random.choice(CONTENT_CLOSERS)

    # ë³€ìˆ˜ ì¹˜í™˜
    replacements = {
        "{months}": months, "{visitors}": visitors, "{posts}": posts,
        "{neighbors}": neighbors, "{posts_per_day}": posts_per_day,
        "{hours}": hours, "{keyword}": keyword,
    }

    parts = [opener] + body_parts + [closer]
    result_parts = []
    for part in parts:
        for k, v in replacements.items():
            part = part.replace(k, v)
        result_parts.append(part)

    return "\n\n".join(result_parts)


def _add_title_variation(title: str) -> str:
    """ê³ ì • ì œëª©(placeholder ì—†ëŠ” ì œëª©)ì— ìì—°ìŠ¤ëŸ¬ìš´ ë³€í˜• ì ‘ë¯¸ì‚¬ ì¶”ê°€."""
    suffix = random.choice(ALL_TITLE_SUFFIXES)
    if suffix.strip("()") in title:
        pool = random.choice([
            TITLE_SUFFIXES_EMOTION,
            TITLE_SUFFIXES_PERIOD,
            TITLE_SUFFIXES_REACTION,
            TITLE_SUFFIXES_TAG,
        ])
        suffix = random.choice(pool)
    return f"{title} {suffix}"


# ============ ë§¥ë½ ì¸ì‹ ëŒ“ê¸€ ìƒì„± ============

def generate_contextual_comment(post: Dict, commenter: VirtualUser) -> str:
    """ê²Œì‹œê¸€ ë§¥ë½ì— ë§ëŠ” ëŒ“ê¸€ ìƒì„±"""
    post_mood = post.get("mood", Mood.CURIOUS)
    post_category = post.get("category", "free")
    post_content = post.get("content", "")

    # ëŒ“ê¸€ ë¬´ë“œ ê²°ì • (ê²Œì‹œê¸€ ë¬´ë“œì™€ ëŒ“ê¸€ëŸ¬ ì„±ê²©ì— ë”°ë¼)
    if commenter.personality == Personality.SARCASTIC:
        comment_mood = random.choice([Mood.SKEPTICAL, Mood.SARCASTIC])
    elif commenter.personality == Personality.FRIENDLY:
        comment_mood = random.choice([Mood.HAPPY, Mood.HELPFUL])
    elif post_mood in [Mood.FRUSTRATED, Mood.TIRED]:
        comment_mood = random.choice([Mood.FRUSTRATED, Mood.HELPFUL])
    else:
        comment_mood = random.choice([Mood.HAPPY, Mood.CURIOUS, Mood.HELPFUL])

    # ê¸°ë³¸ í…œí”Œë¦¿ì—ì„œ ì„ íƒ
    base_comments = COMMENT_TEMPLATES_BY_MOOD.get(comment_mood, COMMENT_TEMPLATES_BY_MOOD[Mood.HAPPY])
    comment = random.choice(base_comments)

    # ê²Œì‹œê¸€ ë‚´ìš©ì— ë”°ë¥¸ ì¶”ê°€ (í‚¤ì›Œë“œ ì–¸ê¸‰)
    if "ìƒìœ„ë…¸ì¶œ" in post_content or "ì„±ê³µ" in post.get("title", ""):
        extras = [
            " ì–´ë–¤ í‚¤ì›Œë“œì˜ˆìš”?", " ì–¼ë§ˆë‚˜ ê±¸ë ¸ì–´ìš”?", " ë¹„ê²°ì´ ë­ì˜ˆìš”?",
            " ì €ë„ ë„ì „í•´ë³¼ê²Œìš”!", " ë¶€ëŸ½ë‹¤ ã… ã… ",
        ]
        if random.random() < 0.4:
            comment += random.choice(extras)

    elif "ì§ˆë¬¸" in post_category or "?" in post.get("title", ""):
        if commenter.blog_months > 6:  # ê²½ë ¥ìëŠ” ì¡°ì–¸
            advice = [
                " ì €ëŠ” ì´ë ‡ê²Œ í–ˆì–´ìš”~", " ì œ ê²½í—˜ìƒì€ìš”...", " ê¾¸ì¤€íˆ í•˜ì‹œë©´ ë¼ìš”!",
            ]
            if random.random() < 0.3:
                comment += random.choice(advice)

    # ì„±ê²©ì— ë”°ë¥¸ í›„ì²˜ë¦¬
    transformer = NaturalTextTransformer()

    if commenter.writing_style.get("uses_slang"):
        comment = transformer.apply_slang(comment, 0.4)

    # ì´ëª¨í‹°ì½˜ ì¶”ê°€
    if commenter.writing_style.get("uses_emoticons") and random.random() < 0.5:
        if comment_mood in [Mood.HAPPY, Mood.HELPFUL]:
            comment += " " + random.choice(EMOTICONS["positive"])
        elif comment_mood in [Mood.FRUSTRATED, Mood.TIRED]:
            comment += " " + random.choice(EMOTICONS["negative"])

    # ëì— ã…‹ã…‹, ã…ã… ì¶”ê°€ (ìºì£¼ì–¼í•œ ì„±ê²©)
    if commenter.personality == Personality.CASUAL and random.random() < 0.3:
        comment += random.choice(["ã…‹ã…‹", "ã…ã…", "ã…‹ã…‹ã…‹"])

    return comment


# ============ ëŒ€ëŒ“ê¸€ ìƒì„± (ëŒ€í™” íë¦„) ============

REPLY_PATTERNS = {
    "answer_question": [
        "ì•— {keyword}ìš”!", "{days} ì •ë„ ê±¸ë ¸ì–´ìš”", "ì €ëŠ” {method} í–ˆì–´ìš”",
        "ë¸”ë­í¬ì—ì„œ ë¶„ì„í•´ë³´ì„¸ìš”!", "ê¾¸ì¤€íˆ í•˜ë‹¤ë³´ë©´ ë¼ìš”",
        "ì•„ ê·¸ê±´ {method} í•´ë³´ì„¸ìš”", "ì €ëŠ” {months}ê°œì›”ì¯¤ë¶€í„° íš¨ê³¼ë´¤ì–´ìš”",
        "í•œë²ˆ í•´ë³´ì‹œê³  ê²°ê³¼ ì•Œë ¤ì£¼ì„¸ìš”!", "ë‹¤ë¥¸ ë¶„ë“¤ë„ ë¹„ìŠ·í•˜ê²Œ ë¬¼ì–´ë³´ì‹œë”ë¼",
    ],
    "thank_reply": [
        "ê°ì‚¬í•©ë‹ˆë‹¤!", "ã„³ã„³", "ë„ì›€ëì–´ìš”!", "ì°¸ê³ í• ê²Œìš”~", "í™”ì´íŒ…ì´ì—ìš”!",
        "ì•„ ê°ì‚¬í•´ìš” ë°”ë¡œ í•´ë³¼ê²Œìš”", "ì˜¤ ê·¸ë ‡êµ°ìš”!", "ì¢‹ì€ ì •ë³´ë„¤ìš” ê°ì‚¬!",
    ],
    "agree": [
        "ë§ì•„ìš” ã…‹ã…‹", "ã…‡ã…ˆ", "ê·¸ìµ¸", "ì €ë„ìš”!", "ê³µê°í•©ë‹ˆë‹¤",
        "ì§„ì§œ ê·¸ë˜ìš”", "ì™„ì „ ê³µê°", "ì €ë„ ê°™ì€ ìƒê°ì´ì—ìš”", "ì´ê±° ë§ëŠ”ë§ì„",
    ],
    "disagree": [
        "ìŒ ì €ëŠ” ì¢€ ë‹¬ëëŠ”ë°", "ì‚¬ë°”ì‚¬ì¼ë“¯", "ê¸€ì„ìš”~", "ì €ëŠ” ë°˜ëŒ€ì˜€ì–´ìš”",
        "ì €ëŠ” ë‹¤ë¥´ê²Œ í–ˆëŠ”ë° íš¨ê³¼ë´¤ì–´ìš”", "ê·¸ê²Œ ê¼­ ë§ì§€ëŠ” ì•Šì€ê²ƒ ê°™ì•„ìš”",
        "ì¼€ì´ìŠ¤ê°€ ë‹¤ë¥¼ìˆ˜ë„ ìˆì§€ ì•Šë‚˜ìš”", "ì €ëŠ” ê·¸ ë°©ë²• ì•ˆë§ì•˜ì–´ìš”",
    ],
}


def generate_reply(parent_comment: str, original_poster: VirtualUser, replier: VirtualUser) -> Optional[str]:
    """ëŒ€ëŒ“ê¸€ ìƒì„±"""
    # ì›ê¸€ì“´ì´ê°€ ë‹µê¸€ ë‹¤ëŠ” ê²½ìš°
    if replier.id == original_poster.id:
        if "?" in parent_comment or "ì–´ë–»ê²Œ" in parent_comment or "ë­" in parent_comment:
            reply = random.choice(REPLY_PATTERNS["answer_question"])
            reply = fill_template(reply, original_poster)
        else:
            reply = random.choice(REPLY_PATTERNS["thank_reply"])
    else:
        # ë‹¤ë¥¸ ì‚¬ëŒì´ ëŒ€ëŒ“ê¸€
        if random.random() < 0.5:
            reply = random.choice(REPLY_PATTERNS["agree"])
        else:
            reply = random.choice(REPLY_PATTERNS["disagree"])

    # ìŠ¤íƒ€ì¼ ì ìš©
    if replier.writing_style.get("uses_emoticons") and random.random() < 0.3:
        reply += " " + random.choice(EMOTICONS["neutral"])

    return reply


# ============ ê²Œì‹œê¸€ ìƒì„± ============

def generate_natural_post(user: VirtualUser = None, category: str = None) -> Dict:
    """ìì—°ìŠ¤ëŸ¬ìš´ ê²Œì‹œê¸€ ìƒì„± - í•­ìƒ ê³ ìœ í•œ ì œëª©ê³¼ ë‚´ìš©ì„ ìƒì„±"""
    if user is None:
        user = generate_virtual_user()

    # ì¹´í…Œê³ ë¦¬ ê²°ì • (ì—†ìœ¼ë©´ ëœë¤)
    if category is None:
        categories = ["free", "tip", "question", "success"]
        weights = [35, 25, 25, 15]
        category = random.choices(categories, weights=weights)[0]

    # ë¬´ë“œ ê²°ì • (ì‚¬ìš©ì ìƒíƒœ, ì¹´í…Œê³ ë¦¬ì— ë”°ë¼)
    if category == "success":
        mood = random.choice([Mood.HAPPY, Mood.BRAGGING, Mood.EXCITED])
    elif category == "question":
        mood = random.choice([Mood.CURIOUS, Mood.FRUSTRATED, Mood.SKEPTICAL])
    elif category == "tip":
        mood = random.choice([Mood.HELPFUL, Mood.HAPPY])
    else:
        mood = random.choice(list(Mood))

    # â˜… 50% í™•ë¥ ë¡œ ìƒˆë¡œìš´ ê³ ìœ  ìƒì„±ê¸° ì‚¬ìš©, 50% í…œí”Œë¦¿ ì‚¬ìš©
    use_unique_generator = random.random() < 0.5

    if use_unique_generator:
        # ìƒˆë¡œìš´ ì¡°í•©í˜• ìƒì„±ê¸° - ìˆ˜ì²œ ê°€ì§€ ê³ ìœ  ì¡°í•© ê°€ëŠ¥
        title = _generate_unique_title(category, user)
        content = _generate_unique_content(category, user)
    else:
        # ê¸°ì¡´ í…œí”Œë¦¿ ê¸°ë°˜ (ë³€í˜• ê°•í™”)
        mood_templates = POST_TEMPLATES_BY_MOOD.get(mood, {})
        category_templates = mood_templates.get(category, [])

        if not category_templates:
            # í´ë°±: ê³ ìœ  ìƒì„±ê¸° ì‚¬ìš©
            title = _generate_unique_title(category, user)
            content = _generate_unique_content(category, user)
        else:
            template = random.choice(category_templates)
            title = fill_template(template["title"], user)
            content = fill_template(template["content"], user)

            # ê³ ì • ì œëª©(placeholderê°€ ì—†ì—ˆë˜ ì œëª©)ì— ë³€í˜• ì ìš©
            if "{" not in template["title"]:
                title = _add_title_variation(title)

    # ìì—°ìŠ¤ëŸ¬ìš´ ë³€í™˜ ì ìš©
    transformer = NaturalTextTransformer()

    if user.writing_style.get("uses_slang"):
        content = transformer.apply_slang(content, 0.3)

    content = transformer.add_fillers(content, user)
    content = transformer.add_emoticons(content, user, mood)

    # ê°€ë” ì˜¤íƒ€ ì¶”ê°€ (5% í™•ë¥ )
    if random.random() < 0.05:
        content = transformer.add_typos(content, 0.01)

    # ë¹„ì†ì–´ ì¶”ê°€ (íŠ¹ì • ë¬´ë“œ + ì„±ê²©)
    if mood in [Mood.FRUSTRATED, Mood.COMPLAINING] and user.writing_style.get("uses_expletives"):
        if random.random() < user.writing_style.get("expletive_frequency", 0.05):
            expletive = random.choice(MILD_EXPLETIVES)
            content = f"{expletive} {content}"

    return {
        "user_id": user.id,
        "user_name": user.name,
        "user_level": user.skill_level,
        "title": title,
        "content": content,
        "category": category,
        "mood": mood,
        "tags": [],
    }


# ============ ë©”ì¸ ìƒì„± í•¨ìˆ˜ ============

def generate_daily_natural_content(
    posts_count: Tuple[int, int] = (15, 30),
    comments_per_post: Tuple[int, int] = (3, 12),
) -> Dict:
    """í•˜ë£¨ì¹˜ ìì—°ìŠ¤ëŸ¬ìš´ ì½˜í…ì¸  ìƒì„± (ì¤‘ë³µ ë°©ì§€ í¬í•¨)"""
    from database.community_db import get_db_connection, is_title_duplicate
    import json

    conn = get_db_connection()
    cursor = conn.cursor()

    # ì˜¤ëŠ˜ ìƒì„±í•  ê²Œì‹œê¸€ ìˆ˜ (ë²”ìœ„ ë‚´ ëœë¤)
    num_posts = random.randint(*posts_count)

    # ì‹œê°„ ë¶„í¬ (ìì—°ìŠ¤ëŸ½ê²Œ)
    now = datetime.now()

    created_posts = []
    created_comments = []
    skipped_duplicates = 0

    # â˜… ë°°ì¹˜ ë‚´ ì¤‘ë³µ ë°©ì§€ìš© ì„¸íŠ¸
    used_titles_in_batch: set = set()

    for i in range(num_posts):
        # ëœë¤ ì‹œê°„ (ì˜¤ëŠ˜ ì¤‘)
        hour = random.choices(
            range(24),
            weights=[1,1,1,1,1,2,3,4,5,6,7,7,6,6,7,7,7,6,7,8,9,8,6,3]
        )[0]
        minute = random.randint(0, 59)
        post_time = now.replace(hour=hour, minute=minute, second=random.randint(0, 59))

        if post_time > now:
            post_time = now - timedelta(minutes=random.randint(1, 60))

        # ê²Œì‹œê¸€ ìƒì„± (ìµœëŒ€ 10íšŒ ì¬ì‹œë„ - ê³ ìœ  ì œëª© ë³´ì¥)
        user = generate_virtual_user()
        post = None
        for _attempt in range(10):
            candidate = generate_natural_post(user)
            title = candidate["title"]

            # (1) ë°°ì¹˜ ë‚´ ì¤‘ë³µ ì²´í¬ (ì ‘ë‘ì‚¬ 15ì ê¸°ì¤€)
            title_prefix = title.strip()[:15]
            is_batch_dup = any(
                existing.strip()[:15] == title_prefix
                for existing in used_titles_in_batch
            )
            if is_batch_dup:
                continue

            # (2) DB ì¤‘ë³µ ì²´í¬ (72ì‹œê°„)
            if is_title_duplicate(title, hours=72):
                continue

            post = candidate
            break

        if post is None:
            skipped_duplicates += 1
            continue

        used_titles_in_batch.add(post["title"])

        # DB ì‚½ì…
        cursor.execute("""
            INSERT INTO posts (user_id, user_name, title, content, category, tags, created_at)
            VALUES (?, ?, ?, ?, ?, ?, ?)
        """, (
            post["user_id"],
            post["user_name"],
            post["title"],
            post["content"],
            post["category"],
            json.dumps(post.get("tags", [])),
            post_time.isoformat()
        ))

        post_id = cursor.lastrowid
        post["id"] = post_id
        post["created_at"] = post_time
        created_posts.append(post)

        # ëŒ“ê¸€ ìƒì„±
        num_comments = random.randint(*comments_per_post)

        for j in range(num_comments):
            commenter = generate_virtual_user()
            comment_text = generate_contextual_comment(post, commenter)

            # ëŒ“ê¸€ ì‹œê°„ (ê²Œì‹œê¸€ ì´í›„)
            comment_time = post_time + timedelta(
                minutes=random.randint(5, 60 * 24)  # 5ë¶„ ~ 24ì‹œê°„ í›„
            )
            if comment_time > now:
                comment_time = now - timedelta(minutes=random.randint(1, 30))

            cursor.execute("""
                INSERT INTO post_comments (post_id, user_id, user_name, content, created_at)
                VALUES (?, ?, ?, ?, ?)
            """, (
                post_id,
                commenter.id,
                commenter.name,
                comment_text,
                comment_time.isoformat()
            ))

            comment_id = cursor.lastrowid
            created_comments.append({
                "id": comment_id,
                "post_id": post_id,
                "content": comment_text,
            })

            # ëŒ€ëŒ“ê¸€ (30% í™•ë¥ )
            if random.random() < 0.3:
                reply = generate_reply(comment_text, user, user)  # ì›ê¸€ì“´ì´ ë‹µê¸€
                if reply:
                    reply_time = comment_time + timedelta(minutes=random.randint(5, 120))
                    if reply_time > now:
                        reply_time = now - timedelta(minutes=random.randint(1, 10))

                    cursor.execute("""
                        INSERT INTO post_comments (post_id, user_id, user_name, content, parent_id, created_at)
                        VALUES (?, ?, ?, ?, ?, ?)
                    """, (
                        post_id,
                        user.id,
                        user.name,
                        reply,
                        comment_id,
                        reply_time.isoformat()
                    ))
                    created_comments.append({
                        "id": cursor.lastrowid,
                        "post_id": post_id,
                        "parent_id": comment_id,
                        "content": reply,
                    })

        # ëŒ“ê¸€ ìˆ˜ ì—…ë°ì´íŠ¸
        cursor.execute("""
            UPDATE posts SET comments_count = (
                SELECT COUNT(*) FROM post_comments WHERE post_id = ? AND is_deleted = FALSE
            ) WHERE id = ?
        """, (post_id, post_id))

    conn.commit()
    conn.close()

    logger.info(
        f"Generated {len(created_posts)} posts and {len(created_comments)} comments "
        f"(skipped {skipped_duplicates} duplicates)"
    )

    return {
        "posts_created": len(created_posts),
        "comments_created": len(created_comments),
        "duplicates_skipped": skipped_duplicates,
        "timestamp": now.isoformat(),
    }


# ============ ê¸°ì¡´ ê²Œì‹œê¸€ì— ëŒ“ê¸€ ì¶”ê°€ ============

def add_comments_to_existing_posts(
    max_posts: int = 20,
    comments_per_post: Tuple[int, int] = (1, 5),
) -> Dict:
    """ê¸°ì¡´ ê²Œì‹œê¸€ì— ìƒˆ ëŒ“ê¸€ ì¶”ê°€"""
    from database.community_db import get_db_connection

    conn = get_db_connection()
    cursor = conn.cursor()

    # ìµœê·¼ ê²Œì‹œê¸€ ì¡°íšŒ (ëŒ“ê¸€ ì ì€ ê²ƒ ìš°ì„ )
    cursor.execute("""
        SELECT id, user_id, user_name, title, content, category
        FROM posts
        WHERE is_deleted = FALSE
        ORDER BY comments_count ASC, created_at DESC
        LIMIT ?
    """, (max_posts,))

    posts = cursor.fetchall()

    now = datetime.now()
    total_comments = 0

    for post in posts:
        post_dict = {
            "id": post["id"],
            "user_id": post["user_id"],
            "title": post["title"],
            "content": post["content"],
            "category": post["category"],
        }

        original_user = generate_virtual_user(post["user_id"])
        num_comments = random.randint(*comments_per_post)

        for _ in range(num_comments):
            commenter = generate_virtual_user()
            comment_text = generate_contextual_comment(post_dict, commenter)

            comment_time = now - timedelta(minutes=random.randint(1, 60 * 6))

            cursor.execute("""
                INSERT INTO post_comments (post_id, user_id, user_name, content, created_at)
                VALUES (?, ?, ?, ?, ?)
            """, (
                post["id"],
                commenter.id,
                commenter.name,
                comment_text,
                comment_time.isoformat()
            ))

            total_comments += 1

        # ëŒ“ê¸€ ìˆ˜ ì—…ë°ì´íŠ¸
        cursor.execute("""
            UPDATE posts SET comments_count = (
                SELECT COUNT(*) FROM post_comments WHERE post_id = ? AND is_deleted = FALSE
            ) WHERE id = ?
        """, (post["id"], post["id"]))

    conn.commit()
    conn.close()

    return {
        "posts_updated": len(posts),
        "comments_added": total_comments,
    }
